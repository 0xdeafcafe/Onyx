var Onyx;!function(e){var a=function(){function a(e){this.stfsPackage=e,this.Init(),this.ValidatePackage()}return a.prototype.Init=function(){},a.prototype.ValidatePackage=function(){var e=!0;if(1297287449==this.stfsPackage.metaData.titleID&&this.stfsPackage.FileExists("variant")||(e=!1),e){var a=this.stfsPackage.ExtractFileFromPath("variant",function(){});if(a.buffer.byteLength>35e3)return showModal(ModalTypes.ErrorModal,"Invalid Halo 4 Gametype","The selected gametype is not a valid Halo 4 gametype."),void 0;cartographer=this,this.UploadVariant(a)}else showModal(ModalTypes.ErrorModal,"Invalid Halo 4 Gametype","The selected gametype is not a valid Halo 4 gametype.")},a.prototype.UploadVariant=function(a){showPendingMask(),$.ajax({type:"POST",url:e.DataStorage.Domain+"api/variant/",data:a.buffer,headers:{"Content-Type":"application/json"},processData:!1,success:function(e){window.location.hash="Create/Modify",$(".scriptData > #scriptmod").val(e),CodeMirror.fromTextArea(document.getElementById("scriptmod"),{lineNumbers:!0,styleActiveLine:!0,theme:"onyx",value:e,tabindex:0,placeholder:"",autofocus:!0}),hidePendingMask(),reDrawCodeIde()}})},a}();e.Cartographer=a}(Onyx||(Onyx={}));var cartographer=null;$(window).on("beforeunload",function(){return null!==cartographer?"Are you sure you want to exit Onyx? Any un-saved data will be lost.":void 0});