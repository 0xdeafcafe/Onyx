var Onyx;!function(t){var e=function(){function e(t){this.stfsPackage=t,this.Init(),this.ValidatePackage()}return e.prototype.Init=function(){},e.prototype.ValidatePackage=function(){var t=!0;if(1297287449==this.stfsPackage.metaData.titleID&&this.stfsPackage.FileExists("variant")||(t=!1),t){var e=this.stfsPackage.ExtractFileFromPath("variant",function(){});if(e.buffer.byteLength>35e3)return showModal(ModalTypes.ErrorModal,"Invalid Halo 4 Gametype","The selected gametype is not a valid Halo 4 gametype."),void 0;cartographer=this,this.UploadVariant(e)}else showModal(ModalTypes.ErrorModal,"Invalid Halo 4 Gametype","The selected gametype is not a valid Halo 4 gametype.")},e.prototype.UploadVariant=function(e){showPendingMask(),$.ajax({type:"POST",url:t.DataStorage.Domain+"api/variant/",data:e.buffer,headers:{"Content-Type":"application/json"},processData:!1,success:function(t){window.location.hash="Create/Modify",$(".scriptData > #scriptmod").val(t),CodeMirror.fromTextArea(document.getElementById("scriptmod"),{lineNumbers:!0,styleActiveLine:!0,theme:"onyx",value:t,tabindex:0,placeholder:""}),$(".CodeMirror").css("height",$(window).outerHeight()-$(".nav-tabs").outerHeight()-$("#gamesaveModify > h1").outerHeight()-130),hidePendingMask()}})},e}();t.Cartographer=e}(Onyx||(Onyx={}));var cartographer=null;$(window).on("beforeunload",function(){return null!==cartographer?"Are you sure you want to exit Onyx? Any un-saved data will be lost.":void 0});