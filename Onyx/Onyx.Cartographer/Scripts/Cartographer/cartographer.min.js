var Onyx;!function(a){var t=function(){function t(a){this.stfsPackage=a,this.Init(),this.ValidatePackage()}return t.prototype.Init=function(){},t.prototype.ValidatePackage=function(){var a=!0;if(1297287449==this.stfsPackage.metaData.titleID&&this.stfsPackage.FileExists("variant")||(a=!1),a){var t=this.stfsPackage.ExtractFileFromPath("variant",function(){});if(t.buffer.byteLength>35e3)return showModal(ModalTypes.ErrorModal,"Invalid Halo 4 Gametype","The selected gametype is not a valid Halo 4 gametype."),void 0;cartographer=this,this.UploadVariant(t)}else showModal(ModalTypes.ErrorModal,"Invalid Halo 4 Gametype","The selected gametype is not a valid Halo 4 gametype.")},t.prototype.UploadVariant=function(t){showPendingMask(),$.ajax({type:"POST",url:a.DataStorage.Domain+"api/variant/",data:t.buffer,headers:{"Content-Type":"application/json"},processData:!1,success:function(a){hidePendingMask(),window.location.hash="Create/Modify",$(".scriptData > #scriptmod").val(a),CodeMirror.fromTextArea(document.getElementById("scriptmod"),{lineNumbers:!0,styleActiveLine:!0,theme:"onyx",value:a}),$(".CodeMirror").css("height",$(window).outerHeight()-$(".nav-tabs").outerHeight()-$("#gamesaveModify > h1").outerHeight()-130)}})},t}();a.Cartographer=t}(Onyx||(Onyx={}));var cartographer=null;$(window).on("beforeunload",function(){return null!==cartographer?"Are you sure you want to exit Onyx? Any un-saved data will be lost.":void 0});