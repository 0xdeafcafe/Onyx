var Onyx;!function(e){var t=function(){function t(e){this.stfsPackage=e,this.Init(),this.ValidatePackage()}return t.prototype.Init=function(){},t.prototype.ValidatePackage=function(){var e=!0;if(1297287449==this.stfsPackage.metaData.titleID&&this.stfsPackage.FileExists("variant")||(e=!1),e){var t=this.stfsPackage.ExtractFileFromPath("variant",function(){});if(t.buffer.byteLength>35e3)return showModal(ModalTypes.ErrorModal,"Invalid Halo 4 Gametype","The selected gametype is not a valid Halo 4 gametype."),void 0;cartographer=this,this.UploadVariant(t)}else showModal(ModalTypes.ErrorModal,"Invalid Halo 4 Gametype","The selected gametype is not a valid Halo 4 gametype.")},t.prototype.UploadVariant=function(t){showPendingMask(),$.ajax({type:"POST",url:e.DataStorage.Domain+"api/variant/",data:t.buffer,headers:{"Content-Type":"application/json"},processData:!1,success:function(e){window.location.hash="Create/Modify",$(".scriptData > #scriptmod").val(e),CodeMirror.fromTextArea(document.getElementById("scriptmod"),{lineNumbers:!0,styleActiveLine:!0,theme:"onyx",value:e,tabindex:0,placeholder:"",autofocus:!0,highlightSelectionMatches:{showToken:/\w/}}),hidePendingMask(),reDrawCodeIde()}})},t}();e.Cartographer=t}(Onyx||(Onyx={}));var cartographer=null;$(window).on("beforeunload",function(){return null!==cartographer?"Are you sure you want to exit Onyx? Any un-saved data will be lost.":void 0});