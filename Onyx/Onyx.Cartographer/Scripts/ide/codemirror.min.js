window.CodeMirror=function(){"use strict";function t(r,o){if(!(this instanceof t))return new t(r,o);this.options=o=o||{};for(var n in oa)!o.hasOwnProperty(n)&&oa.hasOwnProperty(n)&&(o[n]=oa[n]);f(o);var a="string"==typeof o.value?0:o.value.first,i=this.display=e(r,a);i.wrapper.CodeMirror=this,c(this),o.autofocus&&!Wn&&fe(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Ro},l(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var s=o.value;"string"==typeof s&&(s=new ga(o.value,o.mode)),ne(this,co)(this,s),kn&&setTimeout(Qo(ue,this,!0),20),pe(this);var d;try{d=document.activeElement==i.input}catch(u){}d||o.autofocus&&!Wn?setTimeout(Qo(Ee,this),20):Oe(this),ne(this,function(){for(var t in ra)ra.propertyIsEnumerable(t)&&ra[t](this,o[t],na);for(var e=0;e<sa.length;++e)sa[e](this)})()}function e(t,e){var r={},o=r.input=rn("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return Sn?o.style.width="1000px":o.setAttribute("wrap","off"),Fn&&(o.style.border="1px solid black"),o.setAttribute("autocorrect","off"),o.setAttribute("autocapitalize","off"),o.setAttribute("spellcheck","false"),r.inputDiv=rn("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=rn("div",[rn("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=rn("div",[rn("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=rn("div",null,"CodeMirror-scrollbar-filler"),r.gutterFiller=rn("div",null,"CodeMirror-gutter-filler"),r.lineDiv=rn("div",null,"CodeMirror-code"),r.selectionDiv=rn("div",null,null,"position: relative; z-index: 1"),r.cursor=rn("div"," ","CodeMirror-cursor"),r.otherCursor=rn("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),r.measure=rn("div",null,"CodeMirror-measure"),r.lineSpace=rn("div",[r.measure,r.selectionDiv,r.lineDiv,r.cursor,r.otherCursor],null,"position: relative; outline: none"),r.mover=rn("div",[rn("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=rn("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=rn("div",null,null,"position: absolute; height: "+wa+"px; width: 1px;"),r.gutters=rn("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=rn("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=rn("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),Tn&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),t.appendChild?t.appendChild(r.wrapper):t(r.wrapper),Fn&&(o.style.width="0px"),Sn||(r.scroller.draggable=!0),Hn?(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"):Tn&&(r.scrollbarH.style.minWidth=r.scrollbarV.style.minWidth="18px"),r.viewOffset=r.lastSizeC=0,r.showingFrom=r.showingTo=e,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new Ro,r.cachedCharWidth=r.cachedTextHeight=null,r.measureLineCache=[],r.measureLineCachePos=0,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r}function r(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.frontier=e.doc.first,O(e,100),e.state.modeGen++,e.curOp&&le(e)}function o(t){t.options.lineWrapping?(t.display.wrapper.className+=" CodeMirror-wrap",t.display.sizer.style.minWidth=""):(t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),u(t)),a(t),le(t),R(t),setTimeout(function(){h(t)},100)}function n(t){var e=te(t.display),r=t.options.lineWrapping,o=r&&Math.max(5,t.display.scroller.clientWidth/ee(t.display)-3);return function(n){return Nr(t.doc,n)?0:r?(Math.ceil(n.text.length/o)||1)*e:e}}function a(t){var e=t.doc,r=n(t);e.iter(function(t){var e=r(t);e!=t.height&&po(t,e)})}function i(t){var e=da[t.options.keyMap],r=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(r?" cm-keymap-"+r:""),t.state.disableInput=e.disableInput}function l(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),R(t)}function s(t){c(t),le(t),setTimeout(function(){g(t)},20)}function c(t){var e=t.display.gutters,r=t.options.gutters;on(e);for(var o=0;o<r.length;++o){var n=r[o],a=e.appendChild(rn("div",null,"CodeMirror-gutter "+n));"CodeMirror-linenumbers"==n&&(t.display.lineGutter=a,a.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=o?"":"none"}function d(t,e){if(0==e.height)return 0;for(var r,o=e.text.length,n=e;r=$r(n);){var a=r.find();n=uo(t,a.from.line),o+=a.from.ch-a.to.ch}for(n=e;r=Fr(n);){var a=r.find();o-=n.text.length-a.from.ch,n=uo(t,a.to.line),o+=n.text.length-a.to.ch}return o}function u(t){var e=t.display,r=t.doc;e.maxLine=uo(r,r.first),e.maxLineLength=d(r,e.maxLine),e.maxLineChanged=!0,r.iter(function(t){var o=d(r,t);o>e.maxLineLength&&(e.maxLineLength=o,e.maxLine=t)})}function f(t){for(var e=!1,r=0;r<t.gutters.length;++r)"CodeMirror-linenumbers"==t.gutters[r]&&(t.lineNumbers?e=!0:t.gutters.splice(r--,1));!e&&t.lineNumbers&&t.gutters.push("CodeMirror-linenumbers")}function h(t){var e=t.display,r=t.doc.height,o=r+F(e);e.sizer.style.minHeight=e.heightForcer.style.top=o+"px",e.gutters.style.height=Math.max(o,e.scroller.clientHeight-wa)+"px";var n=Math.max(o,e.scroller.scrollHeight),a=e.scroller.scrollWidth>e.scroller.clientWidth+1,i=n>e.scroller.clientHeight+1;i?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=a?cn(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=n-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",a?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=i?cn(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",a&&i?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=cn(e.measure)+"px"):e.scrollbarFiller.style.display="",a&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=cn(e.measure)+"px",e.gutterFiller.style.width=e.gutters.offsetWidth+"px"):e.gutterFiller.style.display="",An&&0===cn(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=Dn?"18px":"12px")}function p(t,e,r){var o=t.scroller.scrollTop,n=t.wrapper.clientHeight;"number"==typeof r?o=r:r&&(o=r.top,n=r.bottom-r.top),o=Math.floor(o-$(t));var a=Math.ceil(o+n);return{from:mo(e,o),to:mo(e,a)}}function g(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=y(e)-e.scroller.scrollLeft+t.doc.scrollLeft,o=e.gutters.offsetWidth,n=r+"px",a=e.lineDiv.firstChild;a;a=a.nextSibling)if(a.alignable)for(var i=0,l=a.alignable;i<l.length;++i)l[i].style.left=n;t.options.fixedGutter&&(e.gutters.style.left=r+o+"px")}}function m(t){if(!t.options.lineNumbers)return!1;var e=t.doc,r=v(t.options,e.first+e.size-1),o=t.display;if(r.length!=o.lineNumChars){var n=o.measure.appendChild(rn("div",[rn("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=n.firstChild.offsetWidth,i=n.offsetWidth-a;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(a,o.lineGutter.offsetWidth-i),o.lineNumWidth=o.lineNumInnerWidth+i,o.lineNumChars=o.lineNumInnerWidth?r.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",!0}return!1}function v(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function y(t){return ln(t.scroller).left-ln(t.sizer).left}function M(t,e,r){for(var o,n=t.display.showingFrom,a=t.display.showingTo,i=p(t.display,t.doc,r);w(t,e,i)&&(o=!0,S(t),h(t),r&&(r=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,"number"==typeof r?r:r.top)),i=p(t.display,t.doc,r),!(i.from>=t.display.showingFrom&&i.to<=t.display.showingTo));)e=[];return o&&(Go(t,"update",t),(t.display.showingFrom!=n||t.display.showingTo!=a)&&Go(t,"viewportChange",t,t.display.showingFrom,t.display.showingTo)),o}function w(t,e,r){var o=t.display,n=t.doc;if(!o.wrapper.clientWidth)return o.showingFrom=o.showingTo=n.first,o.viewOffset=0,void 0;if(!(0==e.length&&r.from>o.showingFrom&&r.to<o.showingTo)){m(t)&&(e=[{from:n.first,to:n.first+n.size}]);var a=o.sizer.style.marginLeft=o.gutters.offsetWidth+"px";o.scrollbarH.style.left=t.options.fixedGutter?a:"0";var i=1/0;if(t.options.lineNumbers)for(var l=0;l<e.length;++l)if(e[l].diff){i=e[l].from;break}var s=n.first+n.size,c=Math.max(r.from-t.options.viewportMargin,n.first),d=Math.min(s,r.to+t.options.viewportMargin);if(o.showingFrom<c&&c-o.showingFrom<20&&(c=Math.max(n.first,o.showingFrom)),o.showingTo>d&&o.showingTo-d<20&&(d=Math.min(s,o.showingTo)),Xn)for(c=go(Wr(n,uo(n,c)));s>d&&Nr(n,uo(n,d));)++d;var u=[{from:Math.max(o.showingFrom,n.first),to:Math.min(o.showingTo,s)}];if(u=u[0].from>=u[0].to?[]:x(u,e),Xn)for(var l=0;l<u.length;++l)for(var f,h=u[l];f=Fr(uo(n,h.to-1));){var p=f.find().from.line;if(!(p>h.from)){u.splice(l--,1);break}h.to=p}for(var g=0,l=0;l<u.length;++l){var h=u[l];h.from<c&&(h.from=c),h.to>d&&(h.to=d),h.from>=h.to?u.splice(l--,1):g+=h.to-h.from}if(g==d-c&&c==o.showingFrom&&d==o.showingTo)return C(t),void 0;u.sort(function(t,e){return t.from-e.from});try{var v=document.activeElement}catch(y){}.7*(d-c)>g&&(o.lineDiv.style.display="none"),k(t,c,d,u,i),o.lineDiv.style.display="",v&&document.activeElement!=v&&v.offsetHeight&&v.focus();var M=c!=o.showingFrom||d!=o.showingTo||o.lastSizeC!=o.wrapper.clientHeight;M&&(o.lastSizeC=o.wrapper.clientHeight,O(t,400)),o.showingFrom=c,o.showingTo=d;for(var w,b=o.lineDiv.offsetTop,T=o.lineDiv.firstChild;T;T=T.nextSibling)if(T.lineObj){if(Tn){var L=T.offsetTop+T.offsetHeight;w=L-b,b=L}else{var S=ln(T);w=S.bottom-S.top}var P=T.lineObj.height-w;if(2>w&&(w=te(o)),P>.001||-.001>P){po(T.lineObj,w);var I=T.lineObj.widgets;if(I)for(var l=0;l<I.length;++l)I[l].height=I[l].node.offsetHeight}}return C(t),!0}}function C(t){var e=t.display.viewOffset=vo(t,uo(t.doc,t.display.showingFrom));t.display.mover.style.top=e+"px"}function x(t,e){for(var r=0,o=e.length||0;o>r;++r){for(var n=e[r],a=[],i=n.diff||0,l=0,s=t.length;s>l;++l){var c=t[l];n.to<=c.from&&n.diff?a.push({from:c.from+i,to:c.to+i}):n.to<=c.from||n.from>=c.to?a.push(c):(n.from>c.from&&a.push({from:c.from,to:n.from}),n.to<c.to&&a.push({from:n.to+i,to:c.to+i}))}t=a}return t}function b(t){for(var e=t.display,r={},o={},n=e.gutters.firstChild,a=0;n;n=n.nextSibling,++a)r[t.options.gutters[a]]=n.offsetLeft,o[t.options.gutters[a]]=n.offsetWidth;return{fixedPos:y(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:r,gutterWidth:o,wrapperWidth:e.wrapper.clientWidth}}function k(t,e,r,o,n){function a(e){var r=e.nextSibling;return Sn&&Nn&&t.display.currentWheelTarget==e?(e.style.display="none",e.lineObj=null):e.parentNode.removeChild(e),r}var i=b(t),l=t.display,s=t.options.lineNumbers;o.length||Sn&&t.display.currentWheelTarget||on(l.lineDiv);var c=l.lineDiv,d=c.firstChild,u=o.shift(),f=e;for(t.doc.iter(e,r,function(e){if(u&&u.to==f&&(u=o.shift()),Nr(t.doc,e)){if(0!=e.height&&po(e,0),e.widgets&&d.previousSibling)for(var r=0;r<e.widgets.length;++r){var l=e.widgets[r];if(l.showIfHidden){var h=d.previousSibling;if(/pre/i.test(h.nodeName)){var p=rn("div",null,null,"position: relative");h.parentNode.replaceChild(p,h),p.appendChild(h),h=p}var g=h.appendChild(rn("div",[l.node],"CodeMirror-linewidget"));l.handleMouseEvents||(g.ignoreEvents=!0),L(l,g,h,i)}}}else if(u&&u.from<=f&&u.to>f){for(;d.lineObj!=e;)d=a(d);s&&f>=n&&d.lineNumber&&an(d.lineNumber,v(t.options,f)),d=d.nextSibling}else{if(e.widgets)for(var m,y=0,M=d;M&&20>y;++y,M=M.nextSibling)if(M.lineObj==e&&/div/i.test(M.nodeName)){m=M;break}var w=T(t,e,f,i,m);if(w!=m)c.insertBefore(w,d);else{for(;d!=m;)d=a(d);d=d.nextSibling}w.lineObj=e}++f});d;)d=a(d)}function T(t,e,r,o,n){var a,i=Qr(t,e),l=e.gutterMarkers,s=t.display;if(!(t.options.lineNumbers||l||e.bgClass||e.wrapClass||e.widgets))return i;if(n){n.alignable=null;for(var c,d=!0,u=0,f=null,h=n.firstChild;h;h=c)if(c=h.nextSibling,/\bCodeMirror-linewidget\b/.test(h.className)){for(var p=0,g=!0;p<e.widgets.length;++p){var m=e.widgets[p];if(m.above||(f=h,g=!1),m.node==h.firstChild){L(m,h,n,o),++u;break}}if(p==e.widgets.length){d=!1;break}}else n.removeChild(h);n.insertBefore(i,f),d&&u==e.widgets.length&&(a=n,n.className=e.wrapClass||"")}if(a||(a=rn("div",null,e.wrapClass,"position: relative"),a.appendChild(i)),e.bgClass&&a.insertBefore(rn("div",null,e.bgClass+" CodeMirror-linebackground"),a.firstChild),t.options.lineNumbers||l){var y=a.insertBefore(rn("div",null,null,"position: absolute; left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px"),a.firstChild);if(t.options.fixedGutter&&(a.alignable||(a.alignable=[])).push(y),!t.options.lineNumbers||l&&l["CodeMirror-linenumbers"]||(a.lineNumber=y.appendChild(rn("div",v(t.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+s.lineNumInnerWidth+"px"))),l)for(var M=0;M<t.options.gutters.length;++M){var w=t.options.gutters[M],C=l.hasOwnProperty(w)&&l[w];C&&y.appendChild(rn("div",[C],"CodeMirror-gutter-elt","left: "+o.gutterLeft[w]+"px; width: "+o.gutterWidth[w]+"px"))}}if(Tn&&(a.style.zIndex=2),e.widgets&&a!=n)for(var p=0,x=e.widgets;p<x.length;++p){var m=x[p],b=rn("div",[m.node],"CodeMirror-linewidget");m.handleMouseEvents||(b.ignoreEvents=!0),L(m,b,a,o),m.above?a.insertBefore(b,t.options.lineNumbers&&0!=e.height?y:i):a.appendChild(b),Go(m,"redraw")}return a}function L(t,e,r,o){if(t.noHScroll){(r.alignable||(r.alignable=[])).push(e);var n=o.wrapperWidth;e.style.left=o.fixedPos+"px",t.coverGutter||(n-=o.gutterTotalWidth,e.style.paddingLeft=o.gutterTotalWidth+"px"),e.style.width=n+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-o.gutterTotalWidth+"px"))}function S(t){var e=t.display,r=Re(t.doc.sel.from,t.doc.sel.to);if(r||t.options.showCursorWhenSelecting?P(t):e.cursor.style.display=e.otherCursor.style.display="none",r?e.selectionDiv.style.display="none":I(t),t.options.moveInputWithCursor){var o=Z(t,t.doc.sel.head,"div"),n=ln(e.wrapper),a=ln(e.lineDiv);e.inputDiv.style.top=Math.max(0,Math.min(e.wrapper.clientHeight-10,o.top+a.top-n.top))+"px",e.inputDiv.style.left=Math.max(0,Math.min(e.wrapper.clientWidth-10,o.left+a.left-n.left))+"px"}}function P(t){var e=t.display,r=Z(t,t.doc.sel.head,"div");e.cursor.style.left=r.left+"px",e.cursor.style.top=r.top+"px",e.cursor.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",e.cursor.style.display="",r.other?(e.otherCursor.style.display="",e.otherCursor.style.left=r.other.left+"px",e.otherCursor.style.top=r.other.top+"px",e.otherCursor.style.height=.85*(r.other.bottom-r.other.top)+"px"):e.otherCursor.style.display="none"}function I(t){function e(t,e,r,o){0>e&&(e=0),i.appendChild(rn("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==r?l-t:r)+"px; height: "+(o-e)+"px"))}function r(r,o,a){function i(e,o){return Y(t,Be(r,e),"div",u,o)}var c,d,u=uo(n,r),f=u.text.length;return un(yo(u),o||0,null==a?f:a,function(t,r,n){var u,h,p,g=i(t,"left");if(t==r)u=g,h=p=g.left;else{if(u=i(r-1,"right"),"rtl"==n){var m=g;g=u,u=m}h=g.left,p=u.right}null==o&&0==t&&(h=s),u.top-g.top>3&&(e(h,g.top,null,g.bottom),h=s,g.bottom<u.top&&e(h,g.bottom,null,u.top)),null==a&&r==f&&(p=l),(!c||g.top<c.top||g.top==c.top&&g.left<c.left)&&(c=g),(!d||u.bottom>d.bottom||u.bottom==d.bottom&&u.right>d.right)&&(d=u),s+1>h&&(h=s),e(h,u.top,p-h,u.bottom)}),{start:c,end:d}}var o=t.display,n=t.doc,a=t.doc.sel,i=document.createDocumentFragment(),l=o.lineSpace.offsetWidth,s=W(t.display);if(a.from.line==a.to.line)r(a.from.line,a.from.ch,a.to.ch);else{var c=uo(n,a.from.line),d=uo(n,a.to.line),u=Wr(n,c)==Wr(n,d),f=r(a.from.line,a.from.ch,u?c.text.length:null).end,h=r(a.to.line,u?0:null,a.to.ch).start;u&&(f.top<h.top-2?(e(f.right,f.top,null,f.bottom),e(s,h.top,h.left,h.bottom)):e(f.right,f.top,h.left-f.right,f.bottom)),f.bottom<h.top&&e(s,f.bottom,null,h.top)}nn(o.selectionDiv,i),o.selectionDiv.style.display=""}function E(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var r=!0;e.cursor.style.visibility=e.otherCursor.style.visibility="",e.blinker=setInterval(function(){e.cursor.style.visibility=e.otherCursor.style.visibility=(r=!r)?"":"hidden"},t.options.cursorBlinkRate)}}function O(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.showingTo&&t.state.highlight.set(e,Qo(H,t))}function H(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.showingTo)){var r,o=+new Date+t.options.workTime,n=gr(e.mode,D(t,e.frontier)),a=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.showingTo+500),function(i){if(e.frontier>=t.display.showingFrom){var l=i.styles;i.styles=Yr(t,i,n);for(var s=!l||l.length!=i.styles.length,c=0;!s&&c<l.length;++c)s=l[c]!=i.styles[c];s&&(r&&r.end==e.frontier?r.end++:a.push(r={start:e.frontier,end:e.frontier+1})),i.stateAfter=gr(e.mode,n)}else qr(t,i,n),i.stateAfter=0==e.frontier%5?gr(e.mode,n):null;return++e.frontier,+new Date>o?(O(t,t.options.workDelay),!0):void 0}),a.length&&ne(t,function(){for(var t=0;t<a.length;++t)le(this,a[t].start,a[t].end)})()}}function A(t,e,r){for(var o,n,a=t.doc,i=e,l=e-100;i>l;--i){if(i<=a.first)return a.first;var s=uo(a,i-1);if(s.stateAfter&&(!r||i<=a.frontier))return i;var c=jo(s.text,null,t.options.tabSize);(null==n||o>c)&&(n=i-1,o=c)}return n}function D(t,e,r){var o=t.doc,n=t.display;if(!o.mode.startState)return!0;var a=A(t,e,r),i=a>o.first&&uo(o,a-1).stateAfter;return i=i?gr(o.mode,i):mr(o.mode),o.iter(a,e,function(r){qr(t,r,i);var l=a==e-1||0==a%5||a>=n.showingFrom&&a<n.showingTo;r.stateAfter=l?gr(o.mode,i):null,++a}),i}function $(t){return t.lineSpace.offsetTop}function F(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function W(t){var e=nn(t.measure,rn("pre",null,null,"text-align: left")).appendChild(rn("span","x"));return e.offsetLeft}function N(t,e,r,o,n){var a=-1;o=o||z(t,e);for(var i=r;;i+=a){var l=o[i];if(l)break;0>a&&0==i&&(a=1)}var s=(r>i||"right"==n)&&null!=l.topRight;return{left:r>i?l.right:l.left,right:i>r?l.left:l.right,top:s?l.topRight:l.top,bottom:s?l.bottomRight:l.bottom}}function V(t,e){for(var r=t.display.measureLineCache,o=0;o<r.length;++o){var n=r[o];if(n.text==e.text&&n.markedSpans==e.markedSpans&&t.display.scroller.clientWidth==n.width&&n.classes==e.textClass+"|"+e.bgClass+"|"+e.wrapClass)return n}}function G(t,e){var r=V(t,e);r&&(r.text=r.measure=r.markedSpans=null)}function z(t,e){var r=V(t,e);if(r)return r.measure;var o=U(t,e),n=t.display.measureLineCache,a={text:e.text,width:t.display.scroller.clientWidth,markedSpans:e.markedSpans,measure:o,classes:e.textClass+"|"+e.bgClass+"|"+e.wrapClass};return 16==n.length?n[++t.display.measureLineCachePos%16]=a:n.push(a),o}function U(t,e){function r(t,e){e>m&&(e=m),0>t&&(t=0);for(var r=0;r<p.length;r+=2){var o=p[r],n=p[r+1];if(!(o>e||t>n)&&(t>=o&&n>=e||o>=t&&e>=n||Math.min(e,n)-Math.max(t,o)>=e-t>>1))return p[r]=Math.min(t,o),p[r+1]=Math.max(e,n),r}return p.push(t,e),r}var o=t.display,n=Jo(e.text.length),a=Qr(t,e,n);if(kn&&!Tn&&!t.options.lineWrapping&&a.childNodes.length>100){for(var i=document.createDocumentFragment(),l=10,s=a.childNodes.length,c=0,d=Math.ceil(s/l);d>c;++c){for(var u=rn("div",null,null,"display: inline-block"),f=0;l>f&&s;++f)u.appendChild(a.firstChild),--s;i.appendChild(u)}a.appendChild(i)}nn(o.measure,a);var h=ln(o.lineDiv),p=[],g=Jo(e.text.length),m=a.offsetHeight;Ln&&o.measure.first!=a&&nn(o.measure,a);for(var v,c=0;c<n.length;++c)if(v=n[c]){var y,M=v;if(/\bCodeMirror-widget\b/.test(v.className)&&v.getClientRects){1==v.firstChild.nodeType&&(M=v.firstChild);var w=M.getClientRects(),C=w[0],x=w[w.length-1];if(w.length>1){var b=r(C.top-h.top,C.bottom-h.top),k=r(x.top-h.top,x.bottom-h.top);g[c]={left:C.left-h.left,right:x.right-h.left,top:b,topRight:k};continue}}y=ln(M);var T=r(y.top-h.top,y.bottom-h.top),L=y.right;v.measureRight&&(L=ln(v.measureRight).left),g[c]={left:y.left-h.left,right:L-h.left,top:T}}for(var v,c=0;c<g.length;++c)if(v=g[c]){var S=v.top,P=v.topRight;v.top=p[S],v.bottom=p[S+1],null!=P&&(v.topRight=p[P],v.bottomRight=p[P+1])}return g}function B(t,e){var r=!1;if(e.markedSpans)for(var o=0;o<e.markedSpans;++o){var n=e.markedSpans[o];!n.collapsed||null!=n.to&&n.to!=e.text.length||(r=!0)}var a=!r&&V(t,e);if(a)return N(t,e,e.text.length,a.measure,"right").right;var i=Qr(t,e),l=i.appendChild(dn(t.display.measure));return nn(t.display.measure,i),ln(l).right-ln(t.display.lineDiv).left}function R(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function j(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function K(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function X(t,e,r,o){if(e.widgets)for(var n=0;n<e.widgets.length;++n)if(e.widgets[n].above){var a=Br(e.widgets[n]);r.top+=a,r.bottom+=a}if("line"==o)return r;o||(o="local");var i=vo(t,e);if("local"==o?i+=$(t.display):i-=t.display.viewOffset,"page"==o||"window"==o){var l=ln(t.display.lineSpace);i+=l.top+("window"==o?0:K());var s=l.left+("window"==o?0:j());r.left+=s,r.right+=s}return r.top+=i,r.bottom+=i,r}function _(t,e,r){if("div"==r)return e;var o=e.left,n=e.top;if("page"==r)o-=j(),n-=K();else if("local"==r||!r){var a=ln(t.display.sizer);o+=a.left,n+=a.top}var i=ln(t.display.lineSpace);return{left:o-i.left,top:n-i.top}}function Y(t,e,r,o,n){return o||(o=uo(t.doc,e.line)),X(t,o,N(t,o,e.ch,null,n),r)}function Z(t,e,r,o,n){function a(e,a){var i=N(t,o,e,n,a?"right":"left");return a?i.left=i.right:i.right=i.left,X(t,o,i,r)}function i(t,e){var r=l[e],o=r.level%2;return t==fn(r)&&e&&r.level<l[e-1].level?(r=l[--e],t=hn(r)-(r.level%2?0:1),o=!0):t==hn(r)&&e<l.length-1&&r.level<l[e+1].level&&(r=l[++e],t=fn(r)-r.level%2,o=!1),o&&t==r.to&&t>r.from?a(t-1):a(t,o)}o=o||uo(t.doc,e.line),n||(n=z(t,o));var l=yo(o),s=e.ch;if(!l)return a(s);var c=Mn(l,s),d=i(s,c);return null!=Ha&&(d.other=i(s,Ha)),d}function q(t,e,r,o){var n=new Be(t,e);return n.xRel=o,r&&(n.outside=!0),n}function J(t,e,r){var o=t.doc;if(r+=t.display.viewOffset,0>r)return q(o.first,0,!0,-1);var n=mo(o,r),a=o.first+o.size-1;if(n>a)return q(o.first+o.size-1,uo(o,a).text.length,!0,1);for(0>e&&(e=0);;){var i=uo(o,n),l=Q(t,i,n,e,r),s=Fr(i),c=s&&s.find();if(!s||!(l.ch>c.from.ch||l.ch==c.from.ch&&l.xRel>0))return l;n=c.to.line}}function Q(t,e,r,o,n){function a(o){var n=Z(t,Be(r,o),"line",e,c);return l=!0,i>n.bottom?n.left-s:i<n.top?n.left+s:(l=!1,n.left)}var i=n-vo(t,e),l=!1,s=2*t.display.wrapper.clientWidth,c=z(t,e),d=yo(e),u=e.text.length,f=pn(e),h=gn(e),p=a(f),g=l,m=a(h),v=l;if(o>m)return q(r,h,v,1);for(;;){if(d?h==f||h==Cn(e,f,1):1>=h-f){for(var y=p>o||m-o>=o-p?f:h,M=o-(y==f?p:m);ka.test(e.text.charAt(y));)++y;var w=q(r,y,y==f?g:v,0>M?-1:M?1:0);return w}var C=Math.ceil(u/2),x=f+C;if(d){x=f;for(var b=0;C>b;++b)x=Cn(e,x,1)}var k=a(x);k>o?(h=x,m=k,(v=l)&&(m+=1e3),u=C):(f=x,p=k,g=l,u-=C)}}function te(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==zn){zn=rn("pre");for(var e=0;49>e;++e)zn.appendChild(document.createTextNode("x")),zn.appendChild(rn("br"));zn.appendChild(document.createTextNode("x"))}nn(t.measure,zn);var r=zn.offsetHeight/50;return r>3&&(t.cachedTextHeight=r),on(t.measure),r||1}function ee(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=rn("span","x"),r=rn("pre",[e]);nn(t.measure,r);var o=e.offsetWidth;return o>2&&(t.cachedCharWidth=o),o||10}function re(t){t.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++_n},Ma++||(ya=[])}function oe(t){var e=t.curOp,r=t.doc,o=t.display;if(t.curOp=null,e.updateMaxLine&&u(t),o.maxLineChanged&&!t.options.lineWrapping&&o.maxLine){var n=B(t,o.maxLine);o.sizer.style.minWidth=Math.max(0,n+3+wa)+"px",o.maxLineChanged=!1;var a=Math.max(0,o.sizer.offsetLeft+o.sizer.offsetWidth-o.scroller.clientWidth);a<r.scrollLeft&&!e.updateScrollPos&&xe(t,Math.min(o.scroller.scrollLeft,a),!0)}var i,l;if(e.updateScrollPos)i=e.updateScrollPos;else if(e.selectionChanged&&o.scroller.clientHeight){var s=Z(t,r.sel.head);i=ar(t,s.left,s.top,s.left,s.bottom)}(e.changes.length||i&&null!=i.scrollTop)&&(l=M(t,e.changes,i&&i.scrollTop),t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)),!l&&e.selectionChanged&&S(t),e.updateScrollPos?(o.scroller.scrollTop=o.scrollbarV.scrollTop=r.scrollTop=i.scrollTop,o.scroller.scrollLeft=o.scrollbarH.scrollLeft=r.scrollLeft=i.scrollLeft,g(t),e.scrollToPos&&or(t,_e(t.doc,e.scrollToPos),e.scrollToPosMargin)):i&&rr(t),e.selectionChanged&&E(t),t.state.focused&&e.updateInput&&ue(t,e.userSelChange);var c=e.maybeHiddenMarkers,d=e.maybeUnhiddenMarkers;if(c)for(var f=0;f<c.length;++f)c[f].lines.length||Vo(c[f],"hide");if(d)for(var f=0;f<d.length;++f)d[f].lines.length&&Vo(d[f],"unhide");var h;if(--Ma||(h=ya,ya=null),e.textChanged&&Vo(t,"change",t,e.textChanged),e.cursorActivity&&Vo(t,"cursorActivity",t),h)for(var f=0;f<h.length;++f)h[f]()}function ne(t,e){return function(){var r=t||this,o=!r.curOp;o&&re(r);try{var n=e.apply(r,arguments)}finally{o&&oe(r)}return n}}function ae(t){return function(){var e,r=this.cm&&!this.cm.curOp;r&&re(this.cm);try{e=t.apply(this,arguments)}finally{r&&oe(this.cm)}return e}}function ie(t,e){var r,o=!t.curOp;o&&re(t);try{r=e()}finally{o&&oe(t)}return r}function le(t,e,r,o){null==e&&(e=t.doc.first),null==r&&(r=t.doc.first+t.doc.size),t.curOp.changes.push({from:e,to:r,diff:o})}function se(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){de(t),t.state.focused&&se(t)})}function ce(t){function e(){var o=de(t);o||r?(t.display.pollingFast=!1,se(t)):(r=!0,t.display.poll.set(60,e))}var r=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function de(t){var e=t.display.input,r=t.display.prevInput,o=t.doc,n=o.sel;if(!t.state.focused||Ia(e)||he(t)||t.state.disableInput)return!1;var a=e.value;if(a==r&&Re(n.from,n.to))return!1;if(kn&&!Ln&&t.display.inputHasSelection===a)return ue(t,!0),!1;var i=!t.curOp;i&&re(t),n.shift=!1;for(var l=0,s=Math.min(r.length,a.length);s>l&&r.charCodeAt(l)==a.charCodeAt(l);)++l;var c=n.from,d=n.to;l<r.length?c=Be(c.line,c.ch-(r.length-l)):t.state.overwrite&&Re(c,d)&&!t.state.pasteIncoming&&(d=Be(d.line,Math.min(uo(o,d.line).text.length,d.ch+(a.length-l))));var u=t.curOp.updateInput,f={from:c,to:d,text:Pa(a.slice(l)),origin:t.state.pasteIncoming?"paste":"+input"};return Fe(t.doc,f,"end"),t.curOp.updateInput=u,Go(t,"inputRead",t,f),a.length>1e3||a.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=a,i&&oe(t),t.state.pasteIncoming=!1,!0}function ue(t,e){var r,o,n=t.doc;if(Re(n.sel.from,n.sel.to))e&&(t.display.prevInput=t.display.input.value="",kn&&!Ln&&(t.display.inputHasSelection=null));else{t.display.prevInput="",r=Ea&&(n.sel.to.line-n.sel.from.line>100||(o=t.getSelection()).length>1e3);var a=r?"-":o||t.getSelection();t.display.input.value=a,t.state.focused&&_o(t.display.input),kn&&!Ln&&(t.display.inputHasSelection=a)}t.display.inaccurateSelection=r}function fe(t){"nocursor"==t.options.readOnly||Wn&&document.activeElement==t.display.input||t.display.input.focus()}function he(t){return t.options.readOnly||t.doc.cantEdit}function pe(t){function e(){t.state.focused&&setTimeout(Qo(fe,t),0)}function r(){null==l&&(l=setTimeout(function(){l=null,i.cachedCharWidth=i.cachedTextHeight=La=null,R(t),ie(t,Qo(le,t))},100))}function o(){for(var t=i.wrapper.parentNode;t&&t!=document.body;t=t.parentNode);t?setTimeout(o,5e3):No(window,"resize",r)}function n(e){zo(t,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Eo(e))||Do(e)}function a(){i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=t.getSelection(),_o(i.input))}var i=t.display;Wo(i.scroller,"mousedown",ne(t,ve)),kn?Wo(i.scroller,"dblclick",ne(t,function(e){if(!zo(t,e)){var r=me(t,e);if(r&&!ye(t,e)&&!ge(t.display,e)){Oo(e);var o=fr(uo(t.doc,r.line).text,r);qe(t.doc,o.from,o.to)}}})):Wo(i.scroller,"dblclick",function(e){zo(t,e)||Oo(e)}),Wo(i.lineSpace,"selectstart",function(t){ge(i,t)||Oo(t)}),jn||Wo(i.scroller,"contextmenu",function(e){He(t,e)}),Wo(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Ce(t,i.scroller.scrollTop),xe(t,i.scroller.scrollLeft,!0),Vo(t,"scroll",t))}),Wo(i.scrollbarV,"scroll",function(){i.scroller.clientHeight&&Ce(t,i.scrollbarV.scrollTop)}),Wo(i.scrollbarH,"scroll",function(){i.scroller.clientHeight&&xe(t,i.scrollbarH.scrollLeft)}),Wo(i.scroller,"mousewheel",function(e){be(t,e)}),Wo(i.scroller,"DOMMouseScroll",function(e){be(t,e)}),Wo(i.scrollbarH,"mousedown",e),Wo(i.scrollbarV,"mousedown",e),Wo(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0});var l;Wo(window,"resize",r),setTimeout(o,5e3),Wo(i.input,"keyup",ne(t,function(e){zo(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,Eo(e))||16==e.keyCode&&(t.doc.sel.shift=!1)})),Wo(i.input,"input",Qo(ce,t)),Wo(i.input,"keydown",ne(t,Pe)),Wo(i.input,"keypress",ne(t,Ie)),Wo(i.input,"focus",Qo(Ee,t)),Wo(i.input,"blur",Qo(Oe,t)),t.options.dragDrop&&(Wo(i.scroller,"dragstart",function(e){we(t,e)}),Wo(i.scroller,"dragenter",n),Wo(i.scroller,"dragover",n),Wo(i.scroller,"drop",ne(t,Me))),Wo(i.scroller,"paste",function(e){ge(i,e)||(fe(t),ce(t))}),Wo(i.input,"paste",function(){t.state.pasteIncoming=!0,ce(t)}),Wo(i.input,"cut",a),Wo(i.input,"copy",a),Hn&&Wo(i.sizer,"mouseup",function(){document.activeElement==i.input&&i.input.blur(),fe(t)})}function ge(t,e){for(var r=$o(e);r!=t.wrapper;r=r.parentNode)if(!r||r.ignoreEvents||r.parentNode==t.sizer&&r!=t.mover)return!0}function me(t,e,r){var o=t.display;if(!r){var n=$o(e);if(n==o.scrollbarH||n==o.scrollbarH.firstChild||n==o.scrollbarV||n==o.scrollbarV.firstChild||n==o.scrollbarFiller||n==o.gutterFiller)return null}var a,i,l=ln(o.lineSpace);try{a=e.clientX,i=e.clientY}catch(e){return null}return J(t,a-l.left,i-l.top)}function ve(t){function e(t){if(!Re(v,t)){if(v=t,"single"==d)return qe(n.doc,_e(i,s),t),void 0;if(g=_e(i,g),m=_e(i,m),"double"==d){var e=fr(uo(i,t.line).text,t);je(t,g)?qe(n.doc,e.from,m):qe(n.doc,g,e.to)}else"triple"==d&&(je(t,g)?qe(n.doc,m,_e(i,Be(t.line,0))):qe(n.doc,g,_e(i,Be(t.line+1,0))))}}function r(t){var o=++M,l=me(n,t,!0);if(l)if(Re(l,f)){var s=t.clientY<y.top?-20:t.clientY>y.bottom?20:0;s&&setTimeout(ne(n,function(){M==o&&(a.scroller.scrollTop+=s,r(t))}),50)}else{n.state.focused||Ee(n),f=l,e(l);var c=p(a,i);(l.line>=c.to||l.line<c.from)&&setTimeout(ne(n,function(){M==o&&r(t)}),150)}}function o(t){M=1/0,Oo(t),fe(n),No(document,"mousemove",w),No(document,"mouseup",C)}if(!zo(this,t)){var n=this,a=n.display,i=n.doc,l=i.sel;if(l.shift=t.shiftKey,ge(a,t))return Sn||(a.scroller.draggable=!1,setTimeout(function(){a.scroller.draggable=!0},100)),void 0;if(!ye(n,t)){var s=me(n,t);switch(Fo(t)){case 3:return jn&&He.call(n,n,t),void 0;case 2:return s&&qe(n.doc,s),setTimeout(Qo(fe,n),20),Oo(t),void 0}if(!s)return $o(t)==a.scroller&&Oo(t),void 0;n.state.focused||Ee(n);var c=+new Date,d="single";if(Bn&&Bn.time>c-400&&Re(Bn.pos,s))d="triple",Oo(t),setTimeout(Qo(fe,n),20),hr(n,s.line);else if(Un&&Un.time>c-400&&Re(Un.pos,s)){d="double",Bn={time:c,pos:s},Oo(t);var u=fr(uo(i,s.line).text,s);qe(n.doc,u.from,u.to)}else Un={time:c,pos:s};var f=s;if(n.options.dragDrop&&Ta&&!he(n)&&!Re(l.from,l.to)&&!je(s,l.from)&&!je(l.to,s)&&"single"==d){var h=ne(n,function(e){Sn&&(a.scroller.draggable=!1),n.state.draggingText=!1,No(document,"mouseup",h),No(a.scroller,"drop",h),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(Oo(e),qe(n.doc,s),fe(n))
});return Sn&&(a.scroller.draggable=!0),n.state.draggingText=h,a.scroller.dragDrop&&a.scroller.dragDrop(),Wo(document,"mouseup",h),Wo(a.scroller,"drop",h),void 0}Oo(t),"single"==d&&qe(n.doc,_e(i,s));var g=l.from,m=l.to,v=s,y=ln(a.wrapper),M=0,w=ne(n,function(t){kn||Fo(t)?r(t):o(t)}),C=ne(n,o);Wo(document,"mousemove",w),Wo(document,"mouseup",C)}}}function ye(t,e){var r=t.display;try{var o=e.clientX,n=e.clientY}catch(e){return!1}if(o>=Math.floor(ln(r.gutters).right))return!1;if(Oo(e),!Bo(t,"gutterClick"))return!0;var a=ln(r.lineDiv);if(n>a.bottom)return!0;n-=a.top-r.viewOffset;for(var i=0;i<t.options.gutters.length;++i){var l=r.gutters.childNodes[i];if(l&&ln(l).right>=o){var s=mo(t.doc,n),c=t.options.gutters[i];Go(t,"gutterClick",t,s,c,e);break}}return!0}function Me(t){var e=this;if(!(zo(e,t)||ge(e.display,t)||e.options.onDragEvent&&e.options.onDragEvent(e,Eo(t)))){Oo(t),kn&&(Yn=+new Date);var r=me(e,t,!0),o=t.dataTransfer.files;if(r&&!he(e))if(o&&o.length&&window.FileReader&&window.File)for(var n=o.length,a=Array(n),i=0,l=function(t,o){var l=new FileReader;l.onload=function(){a[o]=l.result,++i==n&&(r=_e(e.doc,r),Fe(e.doc,{from:r,to:r,text:Pa(a.join("\n")),origin:"paste"},"around"))},l.readAsText(t)},s=0;n>s;++s)l(o[s],s);else{if(e.state.draggingText&&!je(r,e.doc.sel.from)&&!je(e.doc.sel.to,r))return e.state.draggingText(t),setTimeout(Qo(fe,e),20),void 0;try{var a=t.dataTransfer.getData("Text");if(a){var c=e.doc.sel.from,d=e.doc.sel.to;Qe(e.doc,r,r),e.state.draggingText&&Ue(e.doc,"",c,d,"paste"),e.replaceSelection(a,null,"paste"),fe(e),Ee(e)}}catch(t){}}}}function we(t,e){if(kn&&(!t.state.draggingText||+new Date-Yn<100))return Do(e),void 0;if(!zo(t,e)&&!ge(t.display,e)){var r=t.getSelection();if(e.dataTransfer.setData("Text",r),e.dataTransfer.setDragImage&&!On){var o=rn("img",null,null,"position: fixed; left: 0; top: 0;");En&&(o.width=o.height=1,t.display.wrapper.appendChild(o),o._top=o.offsetTop),e.dataTransfer.setDragImage(o,0,0),En&&o.parentNode.removeChild(o)}}}function Ce(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,bn||M(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),bn&&M(t,[]),O(t,100))}function xe(t,e,r){(r?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,g(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function be(t,e){var r=e.wheelDeltaX,o=e.wheelDeltaY;null==r&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(r=e.detail),null==o&&e.detail&&e.axis==e.VERTICAL_AXIS?o=e.detail:null==o&&(o=e.wheelDelta);var n=t.display,a=n.scroller;if(r&&a.scrollWidth>a.clientWidth||o&&a.scrollHeight>a.clientHeight){if(o&&Nn&&Sn)for(var i=e.target;i!=a;i=i.parentNode)if(i.lineObj){t.display.currentWheelTarget=i;break}if(r&&!bn&&!En&&null!=qn)return o&&Ce(t,Math.max(0,Math.min(a.scrollTop+o*qn,a.scrollHeight-a.clientHeight))),xe(t,Math.max(0,Math.min(a.scrollLeft+r*qn,a.scrollWidth-a.clientWidth))),Oo(e),n.wheelStartX=null,void 0;if(o&&null!=qn){var l=o*qn,s=t.doc.scrollTop,c=s+n.wrapper.clientHeight;0>l?s=Math.max(0,s+l-50):c=Math.min(t.doc.height,c+l+50),M(t,[],{top:s,bottom:c})}20>Zn&&(null==n.wheelStartX?(n.wheelStartX=a.scrollLeft,n.wheelStartY=a.scrollTop,n.wheelDX=r,n.wheelDY=o,setTimeout(function(){if(null!=n.wheelStartX){var t=a.scrollLeft-n.wheelStartX,e=a.scrollTop-n.wheelStartY,r=e&&n.wheelDY&&e/n.wheelDY||t&&n.wheelDX&&t/n.wheelDX;n.wheelStartX=n.wheelStartY=null,r&&(qn=(qn*Zn+r)/(Zn+1),++Zn)}},200)):(n.wheelDX+=r,n.wheelDY+=o))}}function ke(t,e,r){if("string"==typeof e&&(e=ca[e],!e))return!1;t.display.pollingFast&&de(t)&&(t.display.pollingFast=!1);var o=t.doc,n=o.sel.shift,a=!1;try{he(t)&&(t.state.suppressEdits=!0),r&&(o.sel.shift=!1),a=e(t)!=Ca}finally{o.sel.shift=n,t.state.suppressEdits=!1}return a}function Te(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function Le(t,e){var r=vr(t.options.keyMap),o=r.auto;clearTimeout(Jn),o&&!Mr(e)&&(Jn=setTimeout(function(){vr(t.options.keyMap)==r&&(t.options.keyMap=o.call?o.call(null,t):o,i(t))},50));var n=wr(e,!0),a=!1;if(!n)return!1;var l=Te(t);return a=e.shiftKey?yr("Shift-"+n,l,function(e){return ke(t,e,!0)})||yr(n,l,function(e){return("string"==typeof e?/^go[A-Z]/.test(e):e.motion)?ke(t,e):void 0}):yr(n,l,function(e){return ke(t,e)}),a&&(Oo(e),E(t),Ln&&(e.oldKeyCode=e.keyCode,e.keyCode=0),Go(t,"keyHandled",t,n,e)),a}function Se(t,e,r){var o=yr("'"+r+"'",Te(t),function(e){return ke(t,e,!0)});return o&&(Oo(e),E(t),Go(t,"keyHandled",t,"'"+r+"'",e)),o}function Pe(t){var e=this;if(e.state.focused||Ee(e),kn&&27==t.keyCode&&(t.returnValue=!1),!(zo(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Eo(t)))){var r=t.keyCode;e.doc.sel.shift=16==r||t.shiftKey;var o=Le(e,t);En&&(ta=o?r:null,!o&&88==r&&!Ea&&(Nn?t.metaKey:t.ctrlKey)&&e.replaceSelection(""))}}function Ie(t){var e=this;if(!(zo(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Eo(t)))){var r=t.keyCode,o=t.charCode;if(En&&r==ta)return ta=null,Oo(t),void 0;if(!(En&&(!t.which||t.which<10)||Hn)||!Le(e,t)){var n=String.fromCharCode(null==o?r:o);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!he(this)&&this.doc.mode.electricChars.indexOf(n)>-1&&setTimeout(ne(e,function(){sr(e,e.doc.sel.to.line,"smart")}),75),Se(e,t,n)||(kn&&!Ln&&(e.display.inputHasSelection=null),ce(e))}}}function Ee(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(Vo(t,"focus",t),t.state.focused=!0,-1==t.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(t.display.wrapper.className+=" CodeMirror-focused"),ue(t,!0)),se(t),E(t))}function Oe(t){t.state.focused&&(Vo(t,"blur",t),t.state.focused=!1,t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.doc.sel.shift=!1)},150)}function He(t,e){function r(){if(null!=n.input.selectionStart){var t=n.input.value=" "+(Re(a.from,a.to)?"":n.input.value);n.prevInput=" ",n.input.selectionStart=1,n.input.selectionEnd=t.length}}function o(){if(n.inputDiv.style.position="relative",n.input.style.cssText=s,Ln&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=l),se(t),null!=n.input.selectionStart){(!kn||Ln)&&r(),clearTimeout(Qn);var e=0,o=function(){" "==n.prevInput&&0==n.input.selectionStart?ne(t,ca.selectAll)(t):e++<10?Qn=setTimeout(o,500):ue(t)};Qn=setTimeout(o,200)}}var n=t.display,a=t.doc.sel;if(!ge(n,e)){var i=me(t,e),l=n.scroller.scrollTop;if(i&&!En){(Re(a.from,a.to)||je(i,a.from)||!je(i,a.to))&&ne(t,Qe)(t.doc,i,i);var s=n.input.style.cssText;if(n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",fe(t),ue(t,!0),Re(a.from,a.to)&&(n.input.value=n.prevInput=" "),kn&&!Ln&&r(),jn){Do(e);var c=function(){No(window,"mouseup",c),setTimeout(o,20)};Wo(window,"mouseup",c)}else setTimeout(o,50)}}}function Ae(t,e,r){if(!je(e.from,r))return _e(t,r);var o=e.text.length-1-(e.to.line-e.from.line);if(r.line>e.to.line+o){var n=r.line-o,a=t.first+t.size-1;return n>a?Be(a,uo(t,a).text.length):Ye(r,uo(t,n).text.length)}if(r.line==e.to.line+o)return Ye(r,Xo(e.text).length+(1==e.text.length?e.from.ch:0)+uo(t,e.to.line).text.length-e.to.ch);var i=r.line-e.from.line;return Ye(r,e.text[i].length+(i?0:e.from.ch))}function De(t,e,r){if(r&&"object"==typeof r)return{anchor:Ae(t,e,r.anchor),head:Ae(t,e,r.head)};if("start"==r)return{anchor:e.from,head:e.from};var o=ea(e);if("around"==r)return{anchor:e.from,head:o};if("end"==r)return{anchor:o,head:o};var n=function(t){if(je(t,e.from))return t;if(!je(e.to,t))return o;var r=t.line+e.text.length-(e.to.line-e.from.line)-1,n=t.ch;return t.line==e.to.line&&(n+=o.ch-e.to.ch),Be(r,n)};return{anchor:n(t.sel.anchor),head:n(t.sel.head)}}function $e(t,e,r){var o={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return r&&(o.update=function(e,r,o,n){e&&(this.from=_e(t,e)),r&&(this.to=_e(t,r)),o&&(this.text=o),void 0!==n&&(this.origin=n)}),Vo(t,"beforeChange",t,o),t.cm&&Vo(t.cm,"beforeChange",t.cm,o),o.canceled?null:{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Fe(t,e,r,o){if(t.cm){if(!t.cm.curOp)return ne(t.cm,Fe)(t,e,r,o);if(t.cm.state.suppressEdits)return}if(!(Bo(t,"beforeChange")||t.cm&&Bo(t.cm,"beforeChange"))||(e=$e(t,e,!0))){var n=Kn&&!o&&Ar(t,e.from,e.to);if(n){for(var a=n.length-1;a>=1;--a)We(t,{from:n[a].from,to:n[a].to,text:[""]});n.length&&We(t,{from:n[0].from,to:n[0].to,text:e.text},r)}else We(t,e,r)}}function We(t,e,r){var o=De(t,e,r);xo(t,e,o,t.cm?t.cm.curOp.id:0/0),Ge(t,e,o,Or(t,e));var n=[];so(t,function(t,r){r||-1!=Yo(n,t.history)||(Po(t.history,e),n.push(t.history)),Ge(t,e,null,Or(t,e))})}function Ne(t,e){if(!t.cm||!t.cm.state.suppressEdits){var r=t.history,o=("undo"==e?r.done:r.undone).pop();if(o){var n={changes:[],anchorBefore:o.anchorAfter,headBefore:o.headAfter,anchorAfter:o.anchorBefore,headAfter:o.headBefore,generation:r.generation};("undo"==e?r.undone:r.done).push(n),r.generation=o.generation||++r.maxGeneration;for(var a=Bo(t,"beforeChange")||t.cm&&Bo(t.cm,"beforeChange"),i=o.changes.length-1;i>=0;--i){var l=o.changes[i];if(l.origin=e,a&&!$e(t,l,!1))return("undo"==e?r.done:r.undone).length=0,void 0;n.changes.push(Co(t,l));var s=i?De(t,l,null):{anchor:o.anchorBefore,head:o.headBefore};Ge(t,l,s,Hr(t,l));var c=[];so(t,function(t,e){e||-1!=Yo(c,t.history)||(Po(t.history,l),c.push(t.history)),Ge(t,l,null,Hr(t,l))})}}}}function Ve(t,e){function r(t){return Be(t.line+e,t.ch)}t.first+=e,t.cm&&le(t.cm,t.first,t.first,e),t.sel.head=r(t.sel.head),t.sel.anchor=r(t.sel.anchor),t.sel.from=r(t.sel.from),t.sel.to=r(t.sel.to)}function Ge(t,e,r,o){if(t.cm&&!t.cm.curOp)return ne(t.cm,Ge)(t,e,r,o);if(e.to.line<t.first)return Ve(t,e.text.length-1-(e.to.line-e.from.line)),void 0;if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var n=e.text.length-1-(t.first-e.from.line);Ve(t,n),e={from:Be(t.first,0),to:Be(e.to.line+n,e.to.ch),text:[Xo(e.text)],origin:e.origin}}var a=t.lastLine();e.to.line>a&&(e={from:e.from,to:Be(a,uo(t,a).text.length),text:[e.text[0]],origin:e.origin}),e.removed=fo(t,e.from,e.to),r||(r=De(t,e,null)),t.cm?ze(t.cm,e,o,r):ao(t,e,o,r)}}function ze(t,e,r,o){var a=t.doc,i=t.display,l=e.from,s=e.to,c=!1,u=l.line;t.options.lineWrapping||(u=go(Wr(a,uo(a,l.line))),a.iter(u,s.line+1,function(t){return t==i.maxLine?(c=!0,!0):void 0})),je(a.sel.head,e.from)||je(e.to,a.sel.head)||(t.curOp.cursorActivity=!0),ao(a,e,r,o,n(t)),t.options.lineWrapping||(a.iter(u,l.line+e.text.length,function(t){var e=d(a,t);e>i.maxLineLength&&(i.maxLine=t,i.maxLineLength=e,i.maxLineChanged=!0,c=!1)}),c&&(t.curOp.updateMaxLine=!0)),a.frontier=Math.min(a.frontier,l.line),O(t,400);var f=e.text.length-(s.line-l.line)-1;if(le(t,l.line,s.line+1,f),Bo(t,"change")){var h={from:l,to:s,text:e.text,removed:e.removed,origin:e.origin};if(t.curOp.textChanged){for(var p=t.curOp.textChanged;p.next;p=p.next);p.next=h}else t.curOp.textChanged=h}}function Ue(t,e,r,o,n){if(o||(o=r),je(o,r)){var a=o;o=r,r=a}"string"==typeof e&&(e=Pa(e)),Fe(t,{from:r,to:o,text:e,origin:n},null)}function Be(t,e){return this instanceof Be?(this.line=t,this.ch=e,void 0):new Be(t,e)}function Re(t,e){return t.line==e.line&&t.ch==e.ch}function je(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function Ke(t){return Be(t.line,t.ch)}function Xe(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function _e(t,e){if(e.line<t.first)return Be(t.first,0);var r=t.first+t.size-1;return e.line>r?Be(r,uo(t,r).text.length):Ye(e,uo(t,e.line).text.length)}function Ye(t,e){var r=t.ch;return null==r||r>e?Be(t.line,e):0>r?Be(t.line,0):t}function Ze(t,e){return e>=t.first&&e<t.first+t.size}function qe(t,e,r,o){if(t.sel.shift||t.sel.extend){var n=t.sel.anchor;if(r){var a=je(e,n);a!=je(r,n)?(n=e,e=r):a!=je(e,r)&&(e=r)}Qe(t,n,e,o)}else Qe(t,e,r||e,o);t.cm&&(t.cm.curOp.userSelChange=!0)}function Je(t,e,r){var o={anchor:e,head:r};return Vo(t,"beforeSelectionChange",t,o),t.cm&&Vo(t.cm,"beforeSelectionChange",t.cm,o),o.anchor=_e(t,o.anchor),o.head=_e(t,o.head),o}function Qe(t,e,r,o,n){if(!n&&Bo(t,"beforeSelectionChange")||t.cm&&Bo(t.cm,"beforeSelectionChange")){var a=Je(t,e,r);r=a.head,e=a.anchor}var i=t.sel;if(i.goalColumn=null,(n||!Re(e,i.anchor))&&(e=er(t,e,o,"push"!=n)),(n||!Re(r,i.head))&&(r=er(t,r,o,"push"!=n)),!Re(i.anchor,e)||!Re(i.head,r)){i.anchor=e,i.head=r;var l=je(r,e);i.from=l?r:e,i.to=l?e:r,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=t.cm.curOp.cursorActivity=!0),Go(t,"cursorActivity",t)}}function tr(t){Qe(t.doc,t.doc.sel.from,t.doc.sel.to,null,"push")}function er(t,e,r,o){var n=!1,a=e,i=r||1;t.cantEdit=!1;t:for(;;){var l=uo(t,a.line);if(l.markedSpans)for(var s=0;s<l.markedSpans.length;++s){var c=l.markedSpans[s],d=c.marker;if((null==c.from||(d.inclusiveLeft?c.from<=a.ch:c.from<a.ch))&&(null==c.to||(d.inclusiveRight?c.to>=a.ch:c.to>a.ch))){if(o&&(Vo(d,"beforeCursorEnter"),d.explicitlyCleared)){if(l.markedSpans){--s;continue}break}if(!d.atomic)continue;var u=d.find()[0>i?"from":"to"];if(Re(u,a)&&(u.ch+=i,u.ch<0?u=u.line>t.first?_e(t,Be(u.line-1)):null:u.ch>l.text.length&&(u=u.line<t.first+t.size-1?Be(u.line+1,0):null),!u)){if(n)return o?(t.cantEdit=!0,Be(t.first,0)):er(t,e,r,!0);n=!0,u=e,i=-i}a=u;continue t}}return a}}function rr(t){var e=or(t,t.doc.sel.head,t.options.cursorScrollMargin);if(t.state.focused){var r=t.display,o=ln(r.sizer),n=null;if(e.top+o.top<0?n=!0:e.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n&&!$n){var a="none"==r.cursor.style.display;a&&(r.cursor.style.display="",r.cursor.style.left=e.left+"px",r.cursor.style.top=e.top-r.viewOffset+"px"),r.cursor.scrollIntoView(n),a&&(r.cursor.style.display="none")}}}function or(t,e,r){for(null==r&&(r=0);;){var o=!1,n=Z(t,e),a=ar(t,n.left,n.top-r,n.left,n.bottom+r),i=t.doc.scrollTop,l=t.doc.scrollLeft;if(null!=a.scrollTop&&(Ce(t,a.scrollTop),Math.abs(t.doc.scrollTop-i)>1&&(o=!0)),null!=a.scrollLeft&&(xe(t,a.scrollLeft),Math.abs(t.doc.scrollLeft-l)>1&&(o=!0)),!o)return n}}function nr(t,e,r,o,n){var a=ar(t,e,r,o,n);null!=a.scrollTop&&Ce(t,a.scrollTop),null!=a.scrollLeft&&xe(t,a.scrollLeft)}function ar(t,e,r,o,n){var a=t.display,i=te(t.display);0>r&&(r=0);var l=a.scroller.clientHeight-wa,s=a.scroller.scrollTop,c={},d=t.doc.height+F(a),u=i>r,f=n>d-i;if(s>r)c.scrollTop=u?0:r;else if(n>s+l){var h=Math.min(r,(f?d:n)-l);h!=s&&(c.scrollTop=h)}var p=a.scroller.clientWidth-wa,g=a.scroller.scrollLeft;e+=a.gutters.offsetWidth,o+=a.gutters.offsetWidth;var m=a.gutters.offsetWidth,v=m+10>e;return g+m>e||v?(v&&(e=0),c.scrollLeft=Math.max(0,e-10-m)):o>p+g-3&&(c.scrollLeft=o+10-p),c}function ir(t,e,r){t.curOp.updateScrollPos={scrollLeft:null==e?t.doc.scrollLeft:e,scrollTop:null==r?t.doc.scrollTop:r}}function lr(t,e,r){var o=t.curOp.updateScrollPos||(t.curOp.updateScrollPos={scrollLeft:t.doc.scrollLeft,scrollTop:t.doc.scrollTop}),n=t.display.scroller;o.scrollTop=Math.max(0,Math.min(n.scrollHeight-n.clientHeight,o.scrollTop+r)),o.scrollLeft=Math.max(0,Math.min(n.scrollWidth-n.clientWidth,o.scrollLeft+e))}function sr(t,e,r,o){var n=t.doc;if(null==r&&(r="add"),"smart"==r)if(t.doc.mode.indent)var a=D(t,e);else r="prev";var i,l=t.options.tabSize,s=uo(n,e),c=jo(s.text,null,l),d=s.text.match(/^\s*/)[0];if("smart"==r&&(i=t.doc.mode.indent(a,s.text.slice(d.length),s.text),i==Ca)){if(!o)return;r="prev"}"prev"==r?i=e>n.first?jo(uo(n,e-1).text,null,l):0:"add"==r?i=c+t.options.indentUnit:"subtract"==r?i=c-t.options.indentUnit:"number"==typeof r&&(i=c+r),i=Math.max(0,i);var u="",f=0;if(t.options.indentWithTabs)for(var h=Math.floor(i/l);h;--h)f+=l,u+="	";i>f&&(u+=Ko(i-f)),u!=d&&Ue(t.doc,u,Be(e,0),Be(e,d.length),"+input"),s.stateAfter=null}function cr(t,e,r){var o=e,n=e,a=t.doc;return"number"==typeof e?n=uo(a,Xe(a,e)):o=go(e),null==o?null:r(n,o)?(le(t,o,o+1),n):null}function dr(t,e,r,o,n){function a(){var e=l+r;return e<t.first||e>=t.first+t.size?u=!1:(l=e,d=uo(t,e))}function i(t){var e=(n?Cn:xn)(d,s,r,!0);if(null==e){if(t||!a())return u=!1;s=n?(0>r?gn:pn)(d):0>r?d.text.length:0}else s=e;return!0}var l=e.line,s=e.ch,c=r,d=uo(t,l),u=!0;if("char"==o)i();else if("column"==o)i(!0);else if("word"==o||"group"==o)for(var f=null,h="group"==o,p=!0;!(0>r)||i(!p);p=!1){var g=d.text.charAt(s)||"\n",m=tn(g)?"w":h?/\s/.test(g)?null:"p":null;if(f&&f!=m){0>r&&(r=1,i());break}if(m&&(f=m),r>0&&!i(!p))break}var v=er(t,Be(l,s),c,!0);return u||(v.hitSide=!0),v}function ur(t,e,r,o){var n,a=t.doc,i=e.left;if("page"==o){var l=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);n=e.top+r*(l-(0>r?1.5:.5)*te(t.display))}else"line"==o&&(n=r>0?e.bottom+3:e.top-3);for(;;){var s=J(t,i,n);if(!s.outside)break;if(0>r?0>=n:n>=a.height){s.hitSide=!0;break}n+=5*r}return s}function fr(t,e){var r=e.ch,o=e.ch;if(t){e.xRel<0||o==t.length?--r:++o;for(var n=t.charAt(r),a=tn(n)?tn:/\s/.test(n)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!tn(t)};r>0&&a(t.charAt(r-1));)--r;for(;o<t.length&&a(t.charAt(o));)++o}return{from:Be(e.line,r),to:Be(e.line,o)}}function hr(t,e){qe(t.doc,Be(e,0),_e(t.doc,Be(e+1,0)))}function pr(e,r,o,n){t.defaults[e]=r,o&&(ra[e]=n?function(t,e,r){r!=na&&o(t,e,r)}:o)}function gr(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var r={};for(var o in e){var n=e[o];n instanceof Array&&(n=n.concat([])),r[o]=n}return r}function mr(t,e,r){return t.startState?t.startState(e,r):!0}function vr(t){return"string"==typeof t?da[t]:t}function yr(t,e,r){function o(e){e=vr(e);var n=e[t];if(n===!1)return"stop";if(null!=n&&r(n))return!0;if(e.nofallthrough)return"stop";var a=e.fallthrough;if(null==a)return!1;if("[object Array]"!=Object.prototype.toString.call(a))return o(a);for(var i=0,l=a.length;l>i;++i){var s=o(a[i]);if(s)return s}return!1}for(var n=0;n<e.length;++n){var a=o(e[n]);if(a)return"stop"!=a}}function Mr(t){var e=Oa[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function wr(t,e){if(En&&34==t.keyCode&&t["char"])return!1;var r=Oa[t.keyCode];return null==r||t.altGraphKey?!1:(t.altKey&&(r="Alt-"+r),(Rn?t.metaKey:t.ctrlKey)&&(r="Ctrl-"+r),(Rn?t.ctrlKey:t.metaKey)&&(r="Cmd-"+r),!e&&t.shiftKey&&(r="Shift-"+r),r)}function Cr(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0}function xr(t,e){this.lines=[],this.type=e,this.doc=t}function br(t,e,r,o,n){if(o&&o.shared)return Tr(t,e,r,o,n);if(t.cm&&!t.cm.curOp)return ne(t.cm,br)(t,e,r,o,n);var a=new xr(t,n);if("range"==n&&!je(e,r))return a;o&&qo(o,a),a.replacedWith&&(a.collapsed=!0,a.replacedWith=rn("span",[a.replacedWith],"CodeMirror-widget"),o.handleMouseEvents||(a.replacedWith.ignoreEvents=!0)),a.collapsed&&(Xn=!0),a.addToHistory&&xo(t,{from:e,to:r,origin:"markText"},{head:t.sel.head,anchor:t.sel.anchor},0/0);var i,l,s,c=e.line,d=0,u=t.cm;if(t.iter(c,r.line+1,function(o){u&&a.collapsed&&!u.options.lineWrapping&&Wr(t,o)==u.display.maxLine&&(s=!0);var n={from:null,to:null,marker:a};d+=o.text.length,c==e.line&&(n.from=e.ch,d-=e.ch),c==r.line&&(n.to=r.ch,d-=o.text.length-r.ch),a.collapsed&&(c==r.line&&(l=Dr(o,r.ch)),c==e.line?i=Dr(o,e.ch):po(o,0)),Pr(o,n),++c}),a.collapsed&&t.iter(e.line,r.line+1,function(e){Nr(t,e)&&po(e,0)}),a.clearOnEnter&&Wo(a,"beforeCursorEnter",function(){a.clear()}),a.readOnly&&(Kn=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),a.collapsed){if(i!=l)throw new Error("Inserting collapsed marker overlapping an existing one");a.size=d,a.atomic=!0}return u&&(s&&(u.curOp.updateMaxLine=!0),(a.className||a.startStyle||a.endStyle||a.collapsed)&&le(u,e.line,r.line+1),a.atomic&&tr(u)),a}function kr(t,e){this.markers=t,this.primary=e;for(var r=0,o=this;r<t.length;++r)t[r].parent=this,Wo(t[r],"clear",function(){o.clear()})}function Tr(t,e,r,o,n){o=qo(o),o.shared=!1;var a=[br(t,e,r,o,n)],i=a[0],l=o.replacedWith;return so(t,function(t){l&&(o.replacedWith=l.cloneNode(!0)),a.push(br(t,_e(t,e),_e(t,r),o,n));for(var s=0;s<t.linked.length;++s)if(t.linked[s].isParent)return;i=Xo(a)}),new kr(a,i)}function Lr(t,e){if(t)for(var r=0;r<t.length;++r){var o=t[r];if(o.marker==e)return o}}function Sr(t,e){for(var r,o=0;o<t.length;++o)t[o]!=e&&(r||(r=[])).push(t[o]);return r}function Pr(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Ir(t,e,r){if(t)for(var o,n=0;n<t.length;++n){var a=t[n],i=a.marker,l=null==a.from||(i.inclusiveLeft?a.from<=e:a.from<e);if(l||"bookmark"==i.type&&a.from==e&&(!r||!a.marker.insertLeft)){var s=null==a.to||(i.inclusiveRight?a.to>=e:a.to>e);(o||(o=[])).push({from:a.from,to:s?null:a.to,marker:i})}}return o}function Er(t,e,r){if(t)for(var o,n=0;n<t.length;++n){var a=t[n],i=a.marker,l=null==a.to||(i.inclusiveRight?a.to>=e:a.to>e);if(l||"bookmark"==i.type&&a.from==e&&(!r||a.marker.insertLeft)){var s=null==a.from||(i.inclusiveLeft?a.from<=e:a.from<e);(o||(o=[])).push({from:s?null:a.from-e,to:null==a.to?null:a.to-e,marker:i})}}return o}function Or(t,e){var r=Ze(t,e.from.line)&&uo(t,e.from.line).markedSpans,o=Ze(t,e.to.line)&&uo(t,e.to.line).markedSpans;if(!r&&!o)return null;var n=e.from.ch,a=e.to.ch,i=Re(e.from,e.to),l=Ir(r,n,i),s=Er(o,a,i),c=1==e.text.length,d=Xo(e.text).length+(c?n:0);if(l)for(var u=0;u<l.length;++u){var f=l[u];if(null==f.to){var h=Lr(s,f.marker);h?c&&(f.to=null==h.to?null:h.to+d):f.to=n}}if(s)for(var u=0;u<s.length;++u){var f=s[u];if(null!=f.to&&(f.to+=d),null==f.from){var h=Lr(l,f.marker);h||(f.from=d,c&&(l||(l=[])).push(f))}else f.from+=d,c&&(l||(l=[])).push(f)}if(c&&l){for(var u=0;u<l.length;++u)null!=l[u].from&&l[u].from==l[u].to&&"bookmark"!=l[u].marker.type&&l.splice(u--,1);l.length||(l=null)}var p=[l];if(!c){var g,m=e.text.length-2;if(m>0&&l)for(var u=0;u<l.length;++u)null==l[u].to&&(g||(g=[])).push({from:null,to:null,marker:l[u].marker});for(var u=0;m>u;++u)p.push(g);p.push(s)}return p}function Hr(t,e){var r=ko(t,e),o=Or(t,e);if(!r)return o;if(!o)return r;for(var n=0;n<r.length;++n){var a=r[n],i=o[n];if(a&&i)t:for(var l=0;l<i.length;++l){for(var s=i[l],c=0;c<a.length;++c)if(a[c].marker==s.marker)continue t;a.push(s)}else i&&(r[n]=i)}return r}function Ar(t,e,r){var o=null;if(t.iter(e.line,r.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var r=t.markedSpans[e].marker;!r.readOnly||o&&-1!=Yo(o,r)||(o||(o=[])).push(r)}}),!o)return null;for(var n=[{from:e,to:r}],a=0;a<o.length;++a)for(var i=o[a],l=i.find(),s=0;s<n.length;++s){var c=n[s];if(!je(c.to,l.from)&&!je(l.to,c.from)){var d=[s,1];(je(c.from,l.from)||!i.inclusiveLeft&&Re(c.from,l.from))&&d.push({from:c.from,to:l.from}),(je(l.to,c.to)||!i.inclusiveRight&&Re(c.to,l.to))&&d.push({from:l.to,to:c.to}),n.splice.apply(n,d),s+=d.length-1}}return n}function Dr(t,e){var r,o=Xn&&t.markedSpans;if(o)for(var n,a=0;a<o.length;++a)n=o[a],n.marker.collapsed&&(null==n.from||n.from<e)&&(null==n.to||n.to>e)&&(!r||r.width<n.marker.width)&&(r=n.marker);return r}function $r(t){return Dr(t,-1)}function Fr(t){return Dr(t,t.text.length+1)}function Wr(t,e){for(var r;r=$r(e);)e=uo(t,r.find().from.line);return e}function Nr(t,e){var r=Xn&&e.markedSpans;if(r)for(var o,n=0;n<r.length;++n)if(o=r[n],o.marker.collapsed){if(null==o.from)return!0;if(!o.marker.replacedWith&&0==o.from&&o.marker.inclusiveLeft&&Vr(t,e,o))return!0}}function Vr(t,e,r){if(null==r.to){var o=r.marker.find().to,n=uo(t,o.line);return Vr(t,n,Lr(n.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==e.text.length)return!0;for(var a,i=0;i<e.markedSpans.length;++i)if(a=e.markedSpans[i],a.marker.collapsed&&!a.marker.replacedWith&&a.from==r.to&&(a.marker.inclusiveLeft||r.marker.inclusiveRight)&&Vr(t,e,a))return!0}function Gr(t){var e=t.markedSpans;if(e){for(var r=0;r<e.length;++r)e[r].marker.detachLine(t);t.markedSpans=null}}function zr(t,e){if(e){for(var r=0;r<e.length;++r)e[r].marker.attachLine(t);t.markedSpans=e}}function Ur(t){return function(){var e=!this.cm.curOp;e&&re(this.cm);try{var r=t.apply(this,arguments)}finally{e&&oe(this.cm)}return r}}function Br(t){return null!=t.height?t.height:(t.node.parentNode&&1==t.node.parentNode.nodeType||nn(t.cm.display.measure,rn("div",[t.node],null,"position: relative")),t.height=t.node.offsetHeight)}function Rr(t,e,r,o){var n=new ua(t,r,o);return n.noHScroll&&(t.display.alignWidgets=!0),cr(t,e,function(e){if((e.widgets||(e.widgets=[])).push(n),n.line=e,!Nr(t.doc,e)||n.showIfHidden){var r=vo(t,e)<t.display.scroller.scrollTop;po(e,e.height+Br(n)),r&&lr(t,0,n.height)}return!0}),n}function jr(t,e,r){var o={text:t};return zr(o,e),o.height=r?r(o):1,o}function Kr(t,e,r,o){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Gr(t),zr(t,r);var n=o?o(t):1;n!=t.height&&po(t,n)}function Xr(t){t.parent=null,Gr(t)}function _r(t,e,r,o,n){var a=r.flattenSpans;null==a&&(a=t.options.flattenSpans);var i,l=0,s=null,c=new Cr(e,t.options.tabSize);for(""==e&&r.blankLine&&r.blankLine(o);!c.eol();)c.pos>t.options.maxHighlightLength?(a=!1,c.pos=Math.min(e.length,c.start+5e4),i=null):i=r.token(c,o),a&&s==i||(l<c.start&&n(c.start,s),l=c.start,s=i),c.start=c.pos;l<c.pos&&n(c.pos,s)}function Yr(t,e,r){var o=[t.state.modeGen];_r(t,e.text,t.doc.mode,r,function(t,e){o.push(t,e)});for(var n=0;n<t.state.overlays.length;++n){var a=t.state.overlays[n],i=1,l=0;_r(t,e.text,a.mode,!0,function(t,e){for(var r=i;t>l;){var n=o[i];n>t&&o.splice(i,1,t,o[i+1],n),i+=2,l=Math.min(t,n)}if(e)if(a.opaque)o.splice(r,i-r,t,e),i=r+2;else for(;i>r;r+=2){var s=o[r+1];o[r+1]=s?s+" "+e:e}})}return o}function Zr(t,e){return e.styles&&e.styles[0]==t.state.modeGen||(e.styles=Yr(t,e,e.stateAfter=D(t,go(e)))),e.styles}function qr(t,e,r){var o=t.doc.mode,n=new Cr(e.text,t.options.tabSize);for(""==e.text&&o.blankLine&&o.blankLine(r);!n.eol()&&n.pos<=t.options.maxHighlightLength;)o.token(n,r),n.start=n.pos}function Jr(t){return t?fa[t]||(fa[t]="cm-"+t.replace(/ +/g," cm-")):null}function Qr(t,e,r){for(var o,n=e,a=!0;o=$r(n);)n=uo(t.doc,o.find().from.line);var i={pre:rn("pre"),col:0,pos:0,display:!r,measure:null,measuredSomething:!1,cm:t};n.textClass&&(i.pre.className=n.textClass);do{n.text&&(a=!1),i.measure=n==e&&r,i.pos=0,i.addToken=i.measure?eo:to,(kn||Sn)&&t.getOption("lineWrapping")&&(i.addToken=ro(i.addToken));var l=no(n,i,Zr(t,n));r&&n==e&&!i.measuredSomething&&(r[0]=i.pre.appendChild(dn(t.display.measure)),i.measuredSomething=!0),l&&(n=uo(t.doc,l.to.line))}while(l);!r||i.measuredSomething||r[0]||(r[0]=i.pre.appendChild(a?rn("span"," "):dn(t.display.measure))),i.pre.firstChild||Nr(t.doc,e)||i.pre.appendChild(document.createTextNode(" "));var s;if(r&&kn&&(s=yo(n))){var c=s.length-1;s[c].from==s[c].to&&--c;var d=s[c],u=s[c-1];if(d.from+1==d.to&&u&&d.level<u.level){var f=r[i.pos-1];f&&f.parentNode.insertBefore(f.measureRight=dn(t.display.measure),f.nextSibling)}}return Vo(t,"renderLine",t,e,i.pre),i.pre}function to(t,e,r,o,n){if(e){if(ha.test(e))for(var a=document.createDocumentFragment(),i=0;;){ha.lastIndex=i;var l=ha.exec(e),s=l?l.index-i:e.length-i;if(s&&(a.appendChild(document.createTextNode(e.slice(i,i+s))),t.col+=s),!l)break;if(i+=s+1,"	"==l[0]){var c=t.cm.options.tabSize,d=c-t.col%c;a.appendChild(rn("span",Ko(d),"cm-tab")),t.col+=d}else{var u=rn("span","•","cm-invalidchar");u.title="\\u"+l[0].charCodeAt(0).toString(16),a.appendChild(u),t.col+=1}}else{t.col+=e.length;var a=document.createTextNode(e)}if(r||o||n||t.measure){var f=r||"";return o&&(f+=o),n&&(f+=n),t.pre.appendChild(rn("span",[a],f))}t.pre.appendChild(a)}}function eo(t,e,r,o,n){for(var a=t.cm.options.lineWrapping,i=0;i<e.length;++i){var l=e.charAt(i),s=0==i;l>=""&&"">l&&i<e.length-1?(l=e.slice(i,i+2),++i):i&&a&&sn(e,i)&&t.pre.appendChild(rn("wbr"));var c=t.measure[t.pos]=to(t,l,r,s&&o,i==e.length-1&&n);kn&&a&&" "==l&&i&&!/\s/.test(e.charAt(i-1))&&i<e.length-1&&!/\s/.test(e.charAt(i+1))&&(c.style.whiteSpace="normal"),t.pos+=l.length}e.length&&(t.measuredSomething=!0)}function ro(t){function e(t){for(var e=" ",r=0;r<t.length-2;++r)e+=r%2?" ":" ";return e+=" "}return function(r,o,n,a,i){return t(r,o.replace(/ {3,}/,e),n,a,i)}}function oo(t,e,r){r&&(t.display||(r=r.cloneNode(!0)),t.measure&&(t.measure[t.pos]=e?r:t.pre.appendChild(dn(t.cm.display.measure)),t.measuredSomething=!0),t.pre.appendChild(r)),t.pos+=e}function no(t,e,r){var o=t.markedSpans,n=t.text,a=0;if(o)for(var i,l,s,c,d,u=n.length,f=0,h=1,p="",g=0;;){if(g==f){l=s=c="",d=null,g=1/0;for(var m=null,v=0;v<o.length;++v){var y=o[v],M=y.marker;y.from<=f&&(null==y.to||y.to>f)?(null!=y.to&&g>y.to&&(g=y.to,s=""),M.className&&(l+=" "+M.className),M.startStyle&&y.from==f&&(c+=" "+M.startStyle),M.endStyle&&y.to==g&&(s+=" "+M.endStyle),M.collapsed&&(!d||d.marker.size<M.size)&&(d=y)):y.from>f&&g>y.from&&(g=y.from),"bookmark"==M.type&&y.from==f&&M.replacedWith&&(m=M.replacedWith)}if(d&&(d.from||0)==f&&(oo(e,(null==d.to?u:d.to)-f,null!=d.from&&d.marker.replacedWith),null==d.to))return d.marker.find();m&&!d&&oo(e,0,m)}if(f>=u)break;for(var w=Math.min(u,g);;){if(p){var C=f+p.length;if(!d){var x=C>w?p.slice(0,w-f):p;e.addToken(e,x,i?i+l:l,c,f+x.length==g?s:"")}if(C>=w){p=p.slice(w-f),f=w;break}f=C,c=""}p=n.slice(a,a=r[h++]),i=Jr(r[h++])}}else for(var h=1;h<r.length;h+=2)e.addToken(e,n.slice(a,a=r[h]),Jr(r[h+1]))}function ao(t,e,r,o,n){function a(t){return r?r[t]:null}function i(t,r,o){Kr(t,r,o,n),Go(t,"change",t,e)}var l=e.from,s=e.to,c=e.text,d=uo(t,l.line),u=uo(t,s.line),f=Xo(c),h=a(c.length-1),p=s.line-l.line;if(0==l.ch&&0==s.ch&&""==f){for(var g=0,m=c.length-1,v=[];m>g;++g)v.push(jr(c[g],a(g),n));i(u,u.text,h),p&&t.remove(l.line,p),v.length&&t.insert(l.line,v)}else if(d==u)if(1==c.length)i(d,d.text.slice(0,l.ch)+f+d.text.slice(s.ch),h);else{for(var v=[],g=1,m=c.length-1;m>g;++g)v.push(jr(c[g],a(g),n));v.push(jr(f+d.text.slice(s.ch),h,n)),i(d,d.text.slice(0,l.ch)+c[0],a(0)),t.insert(l.line+1,v)}else if(1==c.length)i(d,d.text.slice(0,l.ch)+c[0]+u.text.slice(s.ch),a(0)),t.remove(l.line+1,p);else{i(d,d.text.slice(0,l.ch)+c[0],a(0)),i(u,f+u.text.slice(s.ch),h);for(var g=1,m=c.length-1,v=[];m>g;++g)v.push(jr(c[g],a(g),n));p>1&&t.remove(l.line+1,p-1),t.insert(l.line+1,v)}Go(t,"change",t,e),Qe(t,o.anchor,o.head,null,!0)}function io(t){this.lines=t,this.parent=null;for(var e=0,r=t.length,o=0;r>e;++e)t[e].parent=this,o+=t[e].height;this.height=o}function lo(t){this.children=t;for(var e=0,r=0,o=0,n=t.length;n>o;++o){var a=t[o];e+=a.chunkSize(),r+=a.height,a.parent=this}this.size=e,this.height=r,this.parent=null}function so(t,e,r){function o(t,n,a){if(t.linked)for(var i=0;i<t.linked.length;++i){var l=t.linked[i];if(l.doc!=n){var s=a&&l.sharedHist;(!r||s)&&(e(l.doc,s),o(l.doc,t,s))}}}o(t,null,!0)}function co(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,a(t),r(t),t.options.lineWrapping||u(t),t.options.mode=e.modeOption,le(t)}function uo(t,e){for(e-=t.first;!t.lines;)for(var r=0;;++r){var o=t.children[r],n=o.chunkSize();if(n>e){t=o;break}e-=n}return t.lines[e]}function fo(t,e,r){var o=[],n=e.line;return t.iter(e.line,r.line+1,function(t){var a=t.text;n==r.line&&(a=a.slice(0,r.ch)),n==e.line&&(a=a.slice(e.ch)),o.push(a),++n}),o}function ho(t,e,r){var o=[];return t.iter(e,r,function(t){o.push(t.text)}),o}function po(t,e){for(var r=e-t.height,o=t;o;o=o.parent)o.height+=r}function go(t){if(null==t.parent)return null;for(var e=t.parent,r=Yo(e.lines,t),o=e.parent;o;e=o,o=o.parent)for(var n=0;o.children[n]!=e;++n)r+=o.children[n].chunkSize();return r+e.first}function mo(t,e){var r=t.first;t:do{for(var o=0,n=t.children.length;n>o;++o){var a=t.children[o],i=a.height;if(i>e){t=a;continue t}e-=i,r+=a.chunkSize()}return r}while(!t.lines);for(var o=0,n=t.lines.length;n>o;++o){var l=t.lines[o],s=l.height;if(s>e)break;
e-=s}return r+o}function vo(t,e){e=Wr(t.doc,e);for(var r=0,o=e.parent,n=0;n<o.lines.length;++n){var a=o.lines[n];if(a==e)break;r+=a.height}for(var i=o.parent;i;o=i,i=o.parent)for(var n=0;n<i.children.length;++n){var l=i.children[n];if(l==o)break;r+=l.height}return r}function yo(t){var e=t.order;return null==e&&(e=t.order=Aa(t.text)),e}function Mo(t){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:t||1,maxGeneration:t||1}}function wo(t,e,r,o){var n=e["spans_"+t.id],a=0;t.iter(Math.max(t.first,r),Math.min(t.first+t.size,o),function(r){r.markedSpans&&((n||(n=e["spans_"+t.id]={}))[a]=r.markedSpans),++a})}function Co(t,e){var r={from:e.from,to:ea(e),text:fo(t,e.from,e.to)};return wo(t,r,e.from.line,e.to.line+1),so(t,function(t){wo(t,r,e.from.line,e.to.line+1)},!0),r}function xo(t,e,r,o){var n=t.history;n.undone.length=0;var a=+new Date,i=Xo(n.done);if(i&&(n.lastOp==o||n.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&n.lastTime>a-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))){var l=Xo(i.changes);Re(e.from,e.to)&&Re(e.from,l.to)?l.to=ea(e):i.changes.push(Co(t,e)),i.anchorAfter=r.anchor,i.headAfter=r.head}else for(i={changes:[Co(t,e)],generation:n.generation,anchorBefore:t.sel.anchor,headBefore:t.sel.head,anchorAfter:r.anchor,headAfter:r.head},n.done.push(i),n.generation=++n.maxGeneration;n.done.length>n.undoDepth;)n.done.shift();n.lastTime=a,n.lastOp=o,n.lastOrigin=e.origin}function bo(t){if(!t)return null;for(var e,r=0;r<t.length;++r)t[r].marker.explicitlyCleared?e||(e=t.slice(0,r)):e&&e.push(t[r]);return e?e.length?e:null:t}function ko(t,e){var r=e["spans_"+t.id];if(!r)return null;for(var o=0,n=[];o<e.text.length;++o)n.push(bo(r[o]));return n}function To(t,e){for(var r=0,o=[];r<t.length;++r){var n=t[r],a=n.changes,i=[];o.push({changes:i,anchorBefore:n.anchorBefore,headBefore:n.headBefore,anchorAfter:n.anchorAfter,headAfter:n.headAfter});for(var l=0;l<a.length;++l){var s,c=a[l];if(i.push({from:c.from,to:c.to,text:c.text}),e)for(var d in c)(s=d.match(/^spans_(\d+)$/))&&Yo(e,Number(s[1]))>-1&&(Xo(i)[d]=c[d],delete c[d])}}return o}function Lo(t,e,r,o){r<t.line?t.line+=o:e<t.line&&(t.line=e,t.ch=0)}function So(t,e,r,o){for(var n=0;n<t.length;++n){for(var a=t[n],i=!0,l=0;l<a.changes.length;++l){var s=a.changes[l];if(a.copied||(s.from=Ke(s.from),s.to=Ke(s.to)),r<s.from.line)s.from.line+=o,s.to.line+=o;else if(e<=s.to.line){i=!1;break}}a.copied||(a.anchorBefore=Ke(a.anchorBefore),a.headBefore=Ke(a.headBefore),a.anchorAfter=Ke(a.anchorAfter),a.readAfter=Ke(a.headAfter),a.copied=!0),i?(Lo(a.anchorBefore),Lo(a.headBefore),Lo(a.anchorAfter),Lo(a.headAfter)):(t.splice(0,n+1),n=0)}}function Po(t,e){var r=e.from.line,o=e.to.line,n=e.text.length-(o-r)-1;So(t.done,r,o,n),So(t.undone,r,o,n)}function Io(){Do(this)}function Eo(t){return t.stop||(t.stop=Io),t}function Oo(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Ho(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Ao(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Do(t){Oo(t),Ho(t)}function $o(t){return t.target||t.srcElement}function Fo(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Nn&&t.ctrlKey&&1==e&&(e=3),e}function Wo(t,e,r){if(t.addEventListener)t.addEventListener(e,r,!1);else if(t.attachEvent)t.attachEvent("on"+e,r);else{var o=t._handlers||(t._handlers={}),n=o[e]||(o[e]=[]);n.push(r)}}function No(t,e,r){if(t.removeEventListener)t.removeEventListener(e,r,!1);else if(t.detachEvent)t.detachEvent("on"+e,r);else{var o=t._handlers&&t._handlers[e];if(!o)return;for(var n=0;n<o.length;++n)if(o[n]==r){o.splice(n,1);break}}}function Vo(t,e){var r=t._handlers&&t._handlers[e];if(r)for(var o=Array.prototype.slice.call(arguments,2),n=0;n<r.length;++n)r[n].apply(null,o)}function Go(t,e){function r(t){return function(){t.apply(null,n)}}var o=t._handlers&&t._handlers[e];if(o){var n=Array.prototype.slice.call(arguments,2);ya||(++Ma,ya=[],setTimeout(Uo,0));for(var a=0;a<o.length;++a)ya.push(r(o[a]))}}function zo(t,e){return Vo(t,e.type,t,e),Ao(e)}function Uo(){--Ma;var t=ya;ya=null;for(var e=0;e<t.length;++e)t[e]()}function Bo(t,e){var r=t._handlers&&t._handlers[e];return r&&r.length>0}function Ro(){this.id=null}function jo(t,e,r,o,n){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var a=o||0,i=n||0;e>a;++a)"	"==t.charAt(a)?i+=r-i%r:++i;return i}function Ko(t){for(;xa.length<=t;)xa.push(Xo(xa)+" ");return xa[t]}function Xo(t){return t[t.length-1]}function _o(t){if(Fn)t.selectionStart=0,t.selectionEnd=t.value.length;else try{t.select()}catch(e){}}function Yo(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,o=t.length;o>r;++r)if(t[r]==e)return r;return-1}function Zo(t,e){function r(){}r.prototype=t;var o=new r;return e&&qo(e,o),o}function qo(t,e){e||(e={});for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function Jo(t){for(var e=[],r=0;t>r;++r)e.push(void 0);return e}function Qo(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function tn(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||ba.test(t))}function en(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function rn(t,e,r,o){var n=document.createElement(t);if(r&&(n.className=r),o&&(n.style.cssText=o),"string"==typeof e)an(n,e);else if(e)for(var a=0;a<e.length;++a)n.appendChild(e[a]);return n}function on(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function nn(t,e){return on(t).appendChild(e)}function an(t,e){Ln?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function ln(t){return t.getBoundingClientRect()}function sn(){return!1}function cn(t){if(null!=La)return La;var e=rn("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return nn(t,e),e.offsetWidth&&(La=e.offsetHeight-e.clientHeight),La||0}function dn(t){if(null==Sa){var e=rn("span","​");nn(t,rn("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Sa=e.offsetWidth<=1&&e.offsetHeight>2&&!Tn)}return Sa?rn("span","​"):rn("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function un(t,e,r,o){if(!t)return o(e,r,"ltr");for(var n=0;n<t.length;++n){var a=t[n];(a.from<r&&a.to>e||e==r&&a.to==e)&&o(Math.max(a.from,e),Math.min(a.to,r),1==a.level?"rtl":"ltr")}}function fn(t){return t.level%2?t.to:t.from}function hn(t){return t.level%2?t.from:t.to}function pn(t){var e=yo(t);return e?fn(e[0]):0}function gn(t){var e=yo(t);return e?hn(Xo(e)):t.text.length}function mn(t,e){var r=uo(t.doc,e),o=Wr(t.doc,r);o!=r&&(e=go(o));var n=yo(o),a=n?n[0].level%2?gn(o):pn(o):0;return Be(e,a)}function vn(t,e){for(var r,o;r=Fr(o=uo(t.doc,e));)e=r.find().to.line;var n=yo(o),a=n?n[0].level%2?pn(o):gn(o):o.text.length;return Be(e,a)}function yn(t,e,r){var o=t[0].level;return e==o?!0:r==o?!1:r>e}function Mn(t,e){for(var r,o=0;o<t.length;++o){var n=t[o];if(n.from<e&&n.to>e)return Ha=null,o;if(n.from==e||n.to==e){if(null!=r)return yn(t,n.level,t[r].level)?(Ha=r,o):(Ha=o,r);r=o}}return Ha=null,r}function wn(t,e,r,o){if(!o)return e+r;do e+=r;while(e>0&&ka.test(t.text.charAt(e)));return e}function Cn(t,e,r,o){var n=yo(t);if(!n)return xn(t,e,r,o);for(var a=Mn(n,e),i=n[a],l=wn(t,e,i.level%2?-r:r,o);;){if(l>i.from&&l<i.to)return l;if(l==i.from||l==i.to)return Mn(n,l)==a?l:(i=n[a+=r],r>0==i.level%2?i.to:i.from);if(i=n[a+=r],!i)return null;l=r>0==i.level%2?wn(t,i.to,-1,o):wn(t,i.from,1,o)}}function xn(t,e,r,o){var n=e+r;if(o)for(;n>0&&ka.test(t.text.charAt(n));)n+=r;return 0>n||n>t.text.length?null:n}var bn=/gecko\/\d/i.test(navigator.userAgent),kn=/MSIE \d/.test(navigator.userAgent),Tn=kn&&(null==document.documentMode||document.documentMode<8),Ln=kn&&(null==document.documentMode||document.documentMode<9),Sn=/WebKit\//.test(navigator.userAgent),Pn=Sn&&/Qt\/\d+\.\d+/.test(navigator.userAgent),In=/Chrome\//.test(navigator.userAgent),En=/Opera\//.test(navigator.userAgent),On=/Apple Computer/.test(navigator.vendor),Hn=/KHTML\//.test(navigator.userAgent),An=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Dn=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),$n=/PhantomJS/.test(navigator.userAgent),Fn=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Wn=Fn||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Nn=Fn||/Mac/.test(navigator.platform),Vn=/windows/i.test(navigator.platform),Gn=En&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Gn&&(Gn=Number(Gn[1]));var zn,Un,Bn,Rn=Nn&&(Pn||En&&(null==Gn||12.11>Gn)),jn=bn||kn&&!Ln,Kn=!1,Xn=!1,_n=0,Yn=0,Zn=0,qn=null;kn?qn=-.53:bn?qn=15:In?qn=-.7:On&&(qn=-1/3);var Jn,Qn,ta=null,ea=t.changeEnd=function(t){return t.text?Be(t.from.line+t.text.length-1,Xo(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.Pos=Be,t.prototype={constructor:t,focus:function(){window.focus(),fe(this),Ee(this),ce(this)},setOption:function(t,e){var r=this.options,o=r[t];(r[t]!=e||"mode"==t)&&(r[t]=e,ra.hasOwnProperty(t)&&ne(this,ra[t])(this,e,o))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,r=0;r<e.length;++r)if(("string"==typeof t?e[r].name:e[r])==t)return e.splice(r,1),!0},addOverlay:ne(null,function(e,r){var o=e.token?e:t.getMode(this.options,e);if(o.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:o,modeSpec:e,opaque:r&&r.opaque}),this.state.modeGen++,le(this)}),removeOverlay:ne(null,function(t){for(var e=this.state.overlays,r=0;r<e.length;++r){var o=e[r].modeSpec;if(o==t||"string"==typeof t&&o.name==t)return e.splice(r,1),this.state.modeGen++,le(this),void 0}}),indentLine:ne(null,function(t,e,r){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Ze(this.doc,t)&&sr(this,t,e,r)}),indentSelection:ne(null,function(t){var e=this.doc.sel;if(Re(e.from,e.to))return sr(this,e.from.line,t);for(var r=e.to.line-(e.to.ch?0:1),o=e.from.line;r>=o;++o)sr(this,o,t)}),getTokenAt:function(t,e){var r=this.doc;t=_e(r,t);for(var o=D(this,t.line,e),n=this.doc.mode,a=uo(r,t.line),i=new Cr(a.text,this.options.tabSize);i.pos<t.ch&&!i.eol();){i.start=i.pos;var l=n.token(i,o)}return{start:i.start,end:i.pos,string:i.current(),className:l||null,type:l||null,state:o}},getTokenTypeAt:function(t){t=_e(this.doc,t);for(var e=Zr(this,uo(this.doc,t.line)),r=0,o=(e.length-1)/2,n=t.ch;;){var a=r+o>>1;if((a?e[2*a-1]:0)>=n)o=a;else{if(!(e[2*a+1]<n))return e[2*a+2];r=a+1}}},getStateAfter:function(t,e){var r=this.doc;return t=Xe(r,null==t?r.first+r.size-1:t),D(this,t+1,e)},cursorCoords:function(t,e){var r,o=this.doc.sel;return r=null==t?o.head:"object"==typeof t?_e(this.doc,t):t?o.from:o.to,Z(this,r,e||"page")},charCoords:function(t,e){return Y(this,_e(this.doc,t),e||"page")},coordsChar:function(t,e){return t=_(this,t,e||"page"),J(this,t.left,t.top)},lineAtHeight:function(t,e){return t=_(this,{top:t,left:0},e||"page").top,mo(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var r=!1,o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,r=!0);var n=uo(this.doc,t);return X(this,uo(this.doc,t),{top:0,left:0},e||"page").top+(r?n.height:0)},defaultTextHeight:function(){return te(this.display)},defaultCharWidth:function(){return ee(this.display)},setGutterMarker:ne(null,function(t,e,r){return cr(this,t,function(t){var o=t.gutterMarkers||(t.gutterMarkers={});return o[e]=r,!r&&en(o)&&(t.gutterMarkers=null),!0})}),clearGutter:ne(null,function(t){var e=this,r=e.doc,o=r.first;r.iter(function(r){r.gutterMarkers&&r.gutterMarkers[t]&&(r.gutterMarkers[t]=null,le(e,o,o+1),en(r.gutterMarkers)&&(r.gutterMarkers=null)),++o})}),addLineClass:ne(null,function(t,e,r){return cr(this,t,function(t){var o="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[o]){if(new RegExp("(?:^|\\s)"+r+"(?:$|\\s)").test(t[o]))return!1;t[o]+=" "+r}else t[o]=r;return!0})}),removeLineClass:ne(null,function(t,e,r){return cr(this,t,function(t){var o="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",n=t[o];if(!n)return!1;if(null==r)t[o]=null;else{var a=n.match(new RegExp("(?:^|\\s+)"+r+"(?:$|\\s+)"));if(!a)return!1;var i=a.index+a[0].length;t[o]=n.slice(0,a.index)+(a.index&&i!=n.length?" ":"")+n.slice(i)||null}return!0})}),addLineWidget:ne(null,function(t,e,r){return Rr(this,t,e,r)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!Ze(this.doc,t))return null;var e=t;if(t=uo(this.doc,t),!t)return null}else{var e=go(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,r,o,n){var a=this.display;t=Z(this,_e(this.doc,t));var i=t.bottom,l=t.left;if(e.style.position="absolute",a.sizer.appendChild(e),"over"==o)i=t.top;else if("above"==o||"near"==o){var s=Math.max(a.wrapper.clientHeight,this.doc.height),c=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==o||t.bottom+e.offsetHeight>s)&&t.top>e.offsetHeight?i=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=s&&(i=t.bottom),l+e.offsetWidth>c&&(l=c-e.offsetWidth)}e.style.top=i+"px",e.style.left=e.style.right="","right"==n?(l=a.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==n?l=0:"middle"==n&&(l=(a.sizer.clientWidth-e.offsetWidth)/2),e.style.left=l+"px"),r&&nr(this,l,i,l+e.offsetWidth,i+e.offsetHeight)},triggerOnKeyDown:ne(null,Pe),execCommand:function(t){return ca[t](this)},findPosH:function(t,e,r,o){var n=1;0>e&&(n=-1,e=-e);for(var a=0,i=_e(this.doc,t);e>a&&(i=dr(this.doc,i,n,r,o),!i.hitSide);++a);return i},moveH:ne(null,function(t,e){var r,o=this.doc.sel;r=o.shift||o.extend||Re(o.from,o.to)?dr(this.doc,o.head,t,e,this.options.rtlMoveVisually):0>t?o.from:o.to,qe(this.doc,r,r,t)}),deleteH:ne(null,function(t,e){var r=this.doc.sel;Re(r.from,r.to)?Ue(this.doc,"",r.from,dr(this.doc,r.head,t,e,!1),"+delete"):Ue(this.doc,"",r.from,r.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(t,e,r,o){var n=1,a=o;0>e&&(n=-1,e=-e);for(var i=0,l=_e(this.doc,t);e>i;++i){var s=Z(this,l,"div");if(null==a?a=s.left:s.left=a,l=ur(this,s,n,r),l.hitSide)break}return l},moveV:ne(null,function(t,e){var r=this.doc.sel,o=Z(this,r.head,"div");null!=r.goalColumn&&(o.left=r.goalColumn);var n=ur(this,o,t,e);"page"==e&&lr(this,0,Y(this,n,"div").top-o.top),qe(this.doc,n,n,t),r.goalColumn=o.left}),toggleOverwrite:function(t){(null==t||t!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:ne(null,function(t,e){ir(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller,e=wa;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:ne(null,function(t,e){"number"==typeof t&&(t=Be(t,0)),e||(e=0);var r=t;t&&null==t.line||(this.curOp.scrollToPos=t?_e(this.doc,t):this.doc.sel.head,this.curOp.scrollToPosMargin=e,r=Z(this,this.curOp.scrollToPos));var o=ar(this,r.left,r.top-e,r.right,r.bottom+e);ir(this,o.scrollLeft,o.scrollTop)}),setSize:function(t,e){function r(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.refresh()},on:function(t,e){Wo(this,t,e)},off:function(t,e){No(this,t,e)},operation:function(t){return ie(this,t)},refresh:ne(null,function(){R(this),ir(this,this.doc.scrollLeft,this.doc.scrollTop),le(this)}),swapDoc:ne(null,function(t){var e=this.doc;return e.cm=null,co(this,t),R(this),ue(this,!0),ir(this,t.scrollLeft,t.scrollTop),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var ra=t.optionHandlers={},oa=t.defaults={},na=t.Init={toString:function(){return"CodeMirror.Init"}};pr("value","",function(t,e){t.setValue(e)},!0),pr("mode",null,function(t,e){t.doc.modeOption=e,r(t)},!0),pr("indentUnit",2,r,!0),pr("indentWithTabs",!1),pr("smartIndent",!0),pr("tabSize",4,function(t){r(t),R(t),le(t)},!0),pr("electricChars",!0),pr("rtlMoveVisually",!Vn),pr("theme","default",function(t){l(t),s(t)},!0),pr("keyMap","default",i),pr("extraKeys",null),pr("onKeyEvent",null),pr("onDragEvent",null),pr("lineWrapping",!1,o,!0),pr("gutters",[],function(t){f(t.options),s(t)},!0),pr("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?y(t.display)+"px":"0",t.refresh()},!0),pr("coverGutterNextToScrollbar",!1,h,!0),pr("lineNumbers",!1,function(t){f(t.options),s(t)},!0),pr("firstLineNumber",1,s,!0),pr("lineNumberFormatter",function(t){return t},s,!0),pr("showCursorWhenSelecting",!1,S,!0),pr("readOnly",!1,function(t,e){"nocursor"==e?(Oe(t),t.display.input.blur()):e||ue(t,!0)}),pr("dragDrop",!0),pr("cursorBlinkRate",530),pr("cursorScrollMargin",0),pr("cursorHeight",1),pr("workTime",100),pr("workDelay",100),pr("flattenSpans",!0),pr("pollInterval",100),pr("undoDepth",40,function(t,e){t.doc.history.undoDepth=e}),pr("historyEventDelay",500),pr("viewportMargin",10,function(t){t.refresh()},!0),pr("maxHighlightLength",1e4,function(t){r(t),t.refresh()},!0),pr("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),pr("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),pr("autofocus",null);var aa=t.modes={},ia=t.mimeModes={};t.defineMode=function(e,r){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){r.dependencies=[];for(var o=2;o<arguments.length;++o)r.dependencies.push(arguments[o])}aa[e]=r},t.defineMIME=function(t,e){ia[t]=e},t.resolveMode=function(e){if("string"==typeof e&&ia.hasOwnProperty(e))e=ia[e];else if(e&&"string"==typeof e.name&&ia.hasOwnProperty(e.name)){var r=ia[e.name];e=Zo(r,e),e.name=r.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,r){r=t.resolveMode(r);var o=aa[r.name];if(!o)return t.getMode(e,"text/plain");var n=o(e,r);if(la.hasOwnProperty(r.name)){var a=la[r.name];for(var i in a)a.hasOwnProperty(i)&&(n.hasOwnProperty(i)&&(n["_"+i]=n[i]),n[i]=a[i])}return n.name=r.name,n},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var la=t.modeExtensions={};t.extendMode=function(t,e){var r=la.hasOwnProperty(t)?la[t]:la[t]={};qo(e,r)},t.defineExtension=function(e,r){t.prototype[e]=r},t.defineDocExtension=function(t,e){ga.prototype[t]=e},t.defineOption=pr;var sa=[];t.defineInitHook=function(t){sa.push(t)},t.copyState=gr,t.startState=mr,t.innerMode=function(t,e){for(;t.innerMode;){var r=t.innerMode(e);e=r.state,t=r.mode}return r||{mode:t,state:e}};var ca=t.commands={selectAll:function(t){t.setSelection(Be(t.firstLine(),0),Be(t.lastLine()))},killLine:function(t){var e=t.getCursor(!0),r=t.getCursor(!1),o=!Re(e,r);o||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,o?r:Be(e.line),"+delete"):t.replaceRange("",e,Be(e.line+1,0),"+delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",Be(e,0),Be(e),"+delete")},delLineLeft:function(t){var e=t.getCursor();t.replaceRange("",Be(e.line,0),e,"+delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection(Be(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(Be(t.lastLine()))},goLineStart:function(t){t.extendSelection(mn(t,t.getCursor().line))},goLineStartSmart:function(t){var e=t.getCursor(),r=mn(t,e.line),o=t.getLineHandle(r.line),n=yo(o);if(n&&0!=n[0].level)t.extendSelection(r);else{var a=Math.max(0,o.text.search(/\S/)),i=e.line==r.line&&e.ch<=a&&e.ch;t.extendSelection(Be(r.line,i?0:a))}},goLineEnd:function(t){t.extendSelection(vn(t,t.getCursor().line))},goLineRight:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div"))},goLineLeft:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:0,top:e},"div"))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	","end","+input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("	","end","+input")},transposeChars:function(t){var e=t.getCursor(),r=t.getLine(e.line);e.ch>0&&e.ch<r.length-1&&t.replaceRange(r.charAt(e.ch)+r.charAt(e.ch-1),Be(e.line,e.ch-1),Be(e.line,e.ch+1))},newlineAndIndent:function(t){ne(t,function(){t.replaceSelection("\n","end","+input"),t.indentLine(t.getCursor().line,null,!0)})()},toggleOverwrite:function(t){t.toggleOverwrite()}},da=t.keyMap={};da.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},da.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},da.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},da["default"]=Nn?da.macDefault:da.pcDefault,da.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.lookupKey=yr,t.isModifierKey=Mr,t.keyName=wr,t.fromTextArea=function(e,r){function o(){e.value=c.getValue()}if(r||(r={}),null==r.value&&(r.value=e.value),null==r.tabindex&&(r.tabindex=e.tabindex),null==r.placeholder&&(r.placeholder=e.placeholder),null==r.autofocus){var n=document.body;try{n=document.activeElement}catch(a){}r.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}if(e.form&&(Wo(e.form,"submit",o),!r.leaveSubmitMethodAlone)){var i=e.form,l=i.submit;try{var s=i.submit=function(){o(),i.submit=l,i.submit(),i.submit=s}}catch(a){}}e.style.display="none";var c=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},r);return c.save=o,c.getTextArea=function(){return e},c.toTextArea=function(){o(),e.parentNode.removeChild(c.getWrapperElement()),e.style.display="",e.form&&(No(e.form,"submit",o),"function"==typeof e.form.submit&&(e.form.submit=l))},c},Cr.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var r=e==t;else var r=e&&(t.test?t.test(e):t(e));return r?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=jo(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return jo(this.string,null,this.tabSize)},match:function(t,e,r){if("string"!=typeof t){var o=this.string.slice(this.pos).match(t);return o&&o.index>0?null:(o&&e!==!1&&(this.pos+=o[0].length),o)}var n=function(t){return r?t.toLowerCase():t},a=this.string.substr(this.pos,t.length);return n(a)==n(t)?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=Cr,t.TextMarker=xr,xr.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;e&&re(t);for(var r=null,o=null,n=0;n<this.lines.length;++n){var a=this.lines[n],i=Lr(a.markedSpans,this);null!=i.to&&(o=go(a)),a.markedSpans=Sr(a.markedSpans,i),null!=i.from?r=go(a):this.collapsed&&!Nr(this.doc,a)&&t&&po(a,te(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var n=0;n<this.lines.length;++n){var l=Wr(t.doc,this.lines[n]),s=d(t.doc,l);s>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=s,t.display.maxLineChanged=!0)}null!=r&&t&&le(t,r,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&tr(t)),e&&oe(t),Go(this,"clear")}},xr.prototype.find=function(){for(var t,e,r=0;r<this.lines.length;++r){var o=this.lines[r],n=Lr(o.markedSpans,this);if(null!=n.from||null!=n.to){var a=go(o);null!=n.from&&(t=Be(a,n.from)),null!=n.to&&(e=Be(a,n.to))}}return"bookmark"==this.type?t:t&&{from:t,to:e}},xr.prototype.changed=function(){var t=this.find(),e=this.doc.cm;if(t&&e){var r=uo(this.doc,t.from.line);if(G(e,r),t.from.line>=e.display.showingFrom&&t.from.line<e.display.showingTo){for(var o=e.display.lineDiv.firstChild;o;o=o.nextSibling)if(o.lineObj==r){o.offsetHeight!=r.height&&po(r,o.offsetHeight);break}ie(e,function(){e.curOp.selectionChanged=!0})}}},xr.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=Yo(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},xr.prototype.detachLine=function(t){if(this.lines.splice(Yo(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},t.SharedTextMarker=kr,kr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();Go(this,"clear")}},kr.prototype.find=function(){return this.primary.find()};var ua=t.LineWidget=function(t,e,r){for(var o in r)r.hasOwnProperty(o)&&(this[o]=r[o]);this.cm=t,this.node=e};ua.prototype.clear=Ur(function(){var t=this.line.widgets,e=go(this.line);if(null!=e&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(this.line.widgets=null),po(this.line,Math.max(0,this.line.height-Br(this))),le(this.cm,e,e+1)}}),ua.prototype.changed=Ur(function(){var t=this.height;this.height=null;var e=Br(this)-t;if(e){po(this.line,this.line.height+e);var r=go(this.line);le(this.cm,r,r+1)}});var fa={},ha=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;io.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var r=t,o=t+e;o>r;++r){var n=this.lines[r];this.height-=n.height,Xr(n),Go(n,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertInner:function(t,e,r){this.height+=r,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var o=0,n=e.length;n>o;++o)e[o].parent=this},iterN:function(t,e,r){for(var o=t+e;o>t;++t)if(r(this.lines[t]))return!0}},lo.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var r=0;r<this.children.length;++r){var o=this.children[r],n=o.chunkSize();if(n>t){var a=Math.min(e,n-t),i=o.height;if(o.removeInner(t,a),this.height-=i-o.height,n==a&&(this.children.splice(r--,1),o.parent=null),0==(e-=a))break;t=0}else t-=n}if(this.size-e<25){var l=[];this.collapse(l),this.children=[new io(l)],this.children[0].parent=this}},collapse:function(t){for(var e=0,r=this.children.length;r>e;++e)this.children[e].collapse(t)},insertInner:function(t,e,r){this.size+=e.length,this.height+=r;for(var o=0,n=this.children.length;n>o;++o){var a=this.children[o],i=a.chunkSize();if(i>=t){if(a.insertInner(t,e,r),a.lines&&a.lines.length>50){for(;a.lines.length>50;){var l=a.lines.splice(a.lines.length-25,25),s=new io(l);a.height-=s.height,this.children.splice(o+1,0,s),s.parent=this}this.maybeSpill()}break}t-=i}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),r=new lo(e);if(t.parent){t.size-=r.size,t.height-=r.height;var o=Yo(t.parent.children,t);t.parent.children.splice(o+1,0,r)}else{var n=new lo(t.children);n.parent=t,t.children=[n,r],t=n}r.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,r){for(var o=0,n=this.children.length;n>o;++o){var a=this.children[o],i=a.chunkSize();if(i>t){var l=Math.min(e,i-t);if(a.iterN(t,l,r))return!0;if(0==(e-=l))break;t=0}else t-=i}}};var pa=0,ga=t.Doc=function(t,e,r){if(!(this instanceof ga))return new ga(t,e,r);null==r&&(r=0),lo.call(this,[new io([jr("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=Mo(),this.cleanGeneration=1,this.frontier=r;var o=Be(r,0);this.sel={from:o,to:o,head:o,anchor:o,shift:!1,extend:!1,goalColumn:null},this.id=++pa,this.modeOption=e,"string"==typeof t&&(t=Pa(t)),ao(this,{from:o,to:o,text:t},null,{head:o,anchor:o})};ga.prototype=Zo(lo.prototype,{constructor:ga,iter:function(t,e,r){r?this.iterN(t-this.first,e-t,r):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var r=0,o=0,n=e.length;n>o;++o)r+=e[o].height;this.insertInner(t-this.first,e,r)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=ho(this,this.first,this.first+this.size);return t===!1?e:e.join(t||"\n")},setValue:function(t){var e=Be(this.first,0),r=this.first+this.size-1;Fe(this,{from:e,to:Be(r,uo(this,r).text.length),text:Pa(t),origin:"setValue"},{head:e,anchor:e},!0)},replaceRange:function(t,e,r,o){e=_e(this,e),r=r?_e(this,r):e,Ue(this,t,e,r,o)
},getRange:function(t,e,r){var o=fo(this,_e(this,t),_e(this,e));return r===!1?o:o.join(r||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},setLine:function(t,e){Ze(this,t)&&Ue(this,e,Be(t,0),_e(this,Be(t)))},removeLine:function(t){t?Ue(this,"",_e(this,Be(t-1)),_e(this,Be(t))):Ue(this,"",Be(0,0),_e(this,Be(1,0)))},getLineHandle:function(t){return Ze(this,t)?uo(this,t):void 0},getLineNumber:function(t){return go(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return _e(this,t)},getCursor:function(t){var e,r=this.sel;return e=null==t||"head"==t?r.head:"anchor"==t?r.anchor:"end"==t||t===!1?r.to:r.from,Ke(e)},somethingSelected:function(){return!Re(this.sel.head,this.sel.anchor)},setCursor:ae(function(t,e,r){var o=_e(this,"number"==typeof t?Be(t,e||0):t);r?qe(this,o):Qe(this,o,o)}),setSelection:ae(function(t,e){Qe(this,_e(this,t),_e(this,e||t))}),extendSelection:ae(function(t,e){qe(this,_e(this,t),e&&_e(this,e))}),getSelection:function(t){return this.getRange(this.sel.from,this.sel.to,t)},replaceSelection:function(t,e,r){Fe(this,{from:this.sel.from,to:this.sel.to,text:Pa(t),origin:r},e||"around")},undo:ae(function(){Ne(this,"undo")}),redo:ae(function(){Ne(this,"redo")}),setExtending:function(t){this.sel.extend=t},historySize:function(){var t=this.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.history=Mo(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:To(this.history.done),undone:To(this.history.undone)}},setHistory:function(t){var e=this.history=Mo(this.history.maxGeneration);e.done=t.done.slice(0),e.undone=t.undone.slice(0)},markText:function(t,e,r){return br(this,_e(this,t),_e(this,e),r,"range")},setBookmark:function(t,e){var r={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft};return t=_e(this,t),br(this,t,t,r,"bookmark")},findMarksAt:function(t){t=_e(this,t);var e=[],r=uo(this,t.line).markedSpans;if(r)for(var o=0;o<r.length;++o){var n=r[o];(null==n.from||n.from<=t.ch)&&(null==n.to||n.to>=t.ch)&&e.push(n.marker.parent||n.marker)}return e},getAllMarks:function(){var t=[];return this.iter(function(e){var r=e.markedSpans;if(r)for(var o=0;o<r.length;++o)null!=r[o].from&&t.push(r[o].marker)}),t},posFromIndex:function(t){var e,r=this.first;return this.iter(function(o){var n=o.text.length+1;return n>t?(e=t,!0):(t-=n,++r,void 0)}),_e(this,Be(r,e))},indexFromPos:function(t){t=_e(this,t);var e=t.ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new ga(ho(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,r=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<r&&(r=t.to);var o=new ga(ho(this,e,r),t.mode||this.modeOption,e);return t.sharedHist&&(o.history=this.history),(this.linked||(this.linked=[])).push({doc:o,sharedHist:t.sharedHist}),o.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],o},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var r=0;r<this.linked.length;++r){var o=this.linked[r];if(o.doc==e){this.linked.splice(r,1),e.unlinkDoc(this);break}}if(e.history==this.history){var n=[e.id];so(e,function(t){n.push(t.id)},!0),e.history=Mo(),e.history.done=To(this.history.done,n),e.history.undone=To(this.history.undone,n)}},iterLinkedDocs:function(t){so(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),ga.prototype.eachLine=ga.prototype.iter;var ma="iter insert remove copy getEditor".split(" ");for(var va in ga.prototype)ga.prototype.hasOwnProperty(va)&&Yo(ma,va)<0&&(t.prototype[va]=function(t){return function(){return t.apply(this.doc,arguments)}}(ga.prototype[va]));t.e_stop=Do,t.e_preventDefault=Oo,t.e_stopPropagation=Ho;var ya,Ma=0;t.on=Wo,t.off=No,t.signal=Vo;var wa=30,Ca=t.Pass={toString:function(){return"CodeMirror.Pass"}};Ro.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},t.countColumn=jo;var xa=[""],ba=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ka=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;t.replaceGetRect=function(t){ln=t};var Ta=function(){if(Ln)return!1;var t=rn("div");return"draggable"in t||"dragDrop"in t}();bn?sn=function(t,e){return 36==t.charCodeAt(e-1)&&39==t.charCodeAt(e)}:On&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?sn=function(t,e){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(t.slice(e-1,e+1))}:Sn&&(sn=function(t,e){return e>1&&45==t.charCodeAt(e-1)&&/\w/.test(t.charAt(e-2))&&/[^\-?\.]/.test(t.charAt(e))?!0:/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(t.slice(e-1,e+1))});var La,Sa,Pa=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,r=[],o=t.length;o>=e;){var n=t.indexOf("\n",e);-1==n&&(n=t.length);var a=t.slice(e,"\r"==t.charAt(n-1)?n-1:n),i=a.indexOf("\r");-1!=i?(r.push(a.slice(0,i)),e+=i+1):(r.push(a),e=n+1)}return r}:function(t){return t.split(/\r\n?|\n/)};t.splitLines=Pa;var Ia=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(r){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1},Ea=function(){var t=rn("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Oa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};t.keyNames=Oa,function(){for(var t=0;10>t;t++)Oa[t+48]=String(t);for(var t=65;90>=t;t++)Oa[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)Oa[t+111]=Oa[t+63235]="F"+t}();var Ha,Aa=function(){function t(t){return 255>=t?e.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1791>=t?r.charAt(t-1536):t>=1792&&2220>=t?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,a=/[LRr]/,i=/[Lb1n]/,l=/[1n]/,s="L";return function(e){if(!o.test(e))return!1;for(var r,c=e.length,d=[],u=0;c>u;++u)d.push(r=t(e.charCodeAt(u)));for(var u=0,f=s;c>u;++u){var r=d[u];"m"==r?d[u]=f:f=r}for(var u=0,h=s;c>u;++u){var r=d[u];"1"==r&&"r"==h?d[u]="n":a.test(r)&&(h=r,"r"==r&&(d[u]="R"))}for(var u=1,f=d[0];c-1>u;++u){var r=d[u];"+"==r&&"1"==f&&"1"==d[u+1]?d[u]="1":","!=r||f!=d[u+1]||"1"!=f&&"n"!=f||(d[u]=f),f=r}for(var u=0;c>u;++u){var r=d[u];if(","==r)d[u]="N";else if("%"==r){for(var p=u+1;c>p&&"%"==d[p];++p);for(var g=u&&"!"==d[u-1]||c-1>p&&"1"==d[p]?"1":"N",m=u;p>m;++m)d[m]=g;u=p-1}}for(var u=0,h=s;c>u;++u){var r=d[u];"L"==h&&"1"==r?d[u]="L":a.test(r)&&(h=r)}for(var u=0;c>u;++u)if(n.test(d[u])){for(var p=u+1;c>p&&n.test(d[p]);++p);for(var v="L"==(u?d[u-1]:s),y="L"==(c-1>p?d[p]:s),g=v||y?"L":"R",m=u;p>m;++m)d[m]=g;u=p-1}for(var M,w=[],u=0;c>u;)if(i.test(d[u])){var C=u;for(++u;c>u&&i.test(d[u]);++u);w.push({from:C,to:u,level:0})}else{var x=u,b=w.length;for(++u;c>u&&"L"!=d[u];++u);for(var m=x;u>m;)if(l.test(d[m])){m>x&&w.splice(b,0,{from:x,to:m,level:1});var k=m;for(++m;u>m&&l.test(d[m]);++m);w.splice(b,0,{from:k,to:m,level:2}),x=m}else++m;u>x&&w.splice(b,0,{from:x,to:u,level:1})}return 1==w[0].level&&(M=e.match(/^\s+/))&&(w[0].from=M[0].length,w.unshift({from:0,to:M[0].length,level:0})),1==Xo(w).level&&(M=e.match(/\s+$/))&&(Xo(w).to-=M[0].length,w.push({from:c-M[0].length,to:c,level:0})),w[0].level!=Xo(w).level&&w.push({from:c,to:c,level:w[0].level}),w}}();return t.version="3.14.0",t}();